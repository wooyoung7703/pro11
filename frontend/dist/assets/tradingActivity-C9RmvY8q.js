import{d as w,c as r,a as u,n as p,f as x,g as i,t as d,e as o,i as _,k as b,l as D,b as k,j as E}from"./index-BtrOmqR2.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import $ from"./http-CilSfrpq.js";const y={ok:{text:"text-green-400",bg:"bg-green-600/20",label:"정상"},warning:{text:"text-amber-300",bg:"bg-amber-500/20",label:"주의"},danger:{text:"text-brand-danger",bg:"bg-brand-danger/20",label:"위험"},idle:{text:"text-neutral-500",bg:"bg-neutral-600/40",label:"대기"},neutral:{text:"text-neutral-300",bg:"bg-neutral-600/40",label:"중립"},unknown:{text:"text-neutral-400",bg:"bg-neutral-700/40",label:"미확인"}};function S(e){return e&&y[e]||y.unknown}function U(e){return e==null?"unknown":e<120?"ok":e<600?"warning":"danger"}function q(e){return e==null?"unknown":e===0?"idle":e<5?"warning":"ok"}const B={config_disabled:"환경설정 비활성화",runtime_disabled:"런타임 수동 비활성화",artifact_missing:"모델 아티팩트 누락"};function z(e){return e?B[e]||e:null}const M=["data-extra"],T={key:0,"aria-hidden":"true"},L={},W=w({...L,__name:"StatusBadge",props:{status:{},icon:{},extraClass:{}},setup(e){const t=e,s=r(()=>S(t.status)),n=r(()=>[s.value.bg,s.value.text,t.extraClass].filter(Boolean).join(" "));return(f,m)=>(o(),u("span",{class:p([n.value,"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-medium tracking-wide"]),"data-extra":e.extraClass},[e.icon?(o(),u("span",T,d(e.icon),1)):x("",!0),i(f.$slots,"default",{},()=>[_(d(s.value.label),1)])],10,M))}}),N={key:0,class:"flex items-center justify-between mb-0.5"},O={class:"text-[11px] text-neutral-400 font-medium"},V={key:1,class:"mt-1 text-[10px] text-neutral-400"},I={},R=w({...I,__name:"MetricCard",props:{label:{},value:{},status:{},format:{type:Function},dense:{type:Boolean},flash:{type:Boolean}},setup(e){const t=e,s=r(()=>S(t.status||"unknown")),n=r(()=>t.format?t.format(t.value):t.value??"-"),f=r(()=>s.value.text),m=b(void 0),c=b(!1),h=b(null);let g=null;const A=r(()=>!t.flash||!c.value?"":h.value==="up"?"metric-flash-up":h.value==="down"?"metric-flash-down":"metric-flash");return D(()=>t.value,(a,l)=>{if(t.flash){if(l===void 0){m.value=a;return}a!==l&&(h.value=typeof a=="number"&&typeof l=="number"?a>l?"up":"down":null,c.value=!1,requestAnimationFrame(()=>{c.value=!0}),g&&clearTimeout(g),g=setTimeout(()=>{c.value=!1},600),m.value=a)}}),(a,l)=>(o(),u("div",{class:p(["p-2 rounded bg-neutral-700/40",{"py-1 px-2":e.dense}])},[e.label||a.$slots.header?(o(),u("div",N,[k("div",O,[i(a.$slots,"label",{},()=>[_(d(e.label),1)],!0)]),i(a.$slots,"badge",{},void 0,!0)])):x("",!0),k("div",{class:p(["font-semibold text-sm transition-colors duration-500",[f.value,A.value]])},[i(a.$slots,"value",{},()=>[_(d(n.value),1)],!0)],2),a.$slots.footer?(o(),u("div",V,[i(a.$slots,"footer",{},void 0,!0)])):x("",!0)],2))}}),G=C(R,[["__scopeId","data-v-95ab2d3f"]]),v={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},H=E("tradingActivity",{state:()=>({loading:!1,initialLoading:!0,refreshing:!1,error:null,summary:null,lastOkAt:null,idleStreakMinutes:0}),getters:{isIdle(e){return e.summary?e.summary.decisions_5m===0:!0},lastDecisionDate(e){return!e.summary||!e.summary.last_decision_ts?null:new Date(e.summary.last_decision_ts*1e3)}},actions:{async fetchSummary(){this.initialLoading?this.loading=!0:this.refreshing=!0,this.error=null;try{const e=await $.get("/api/inference/activity/summary");if(e.data.status==="ok"){const t=this.summary;if(this.summary=e.data,this.lastOkAt=Date.now(),e.data.decisions_5m===0){const s=e.data.interval||60;this.idleStreakMinutes+=s/60}else this.idleStreakMinutes=0}else this.error=e.data.status}catch(e){this.error=(e==null?void 0:e.message)||"fetch_failed"}finally{this.loading=!1,this.initialLoading&&(this.initialLoading=!1),this.refreshing=!1}},compareIntervalWithEnv(){var s;const e=(s=this.summary)==null?void 0:s.interval;let t;try{const n=v==null?void 0:v.VITE_INFERENCE_AUTO_LOOP_INTERVAL;n&&(t=Number(n))}catch{}return e==null||t==null?{backend:e,env:t,match:null}:{backend:e,env:t,match:e===t}}}});export{G as M,W as _,q as a,U as c,z as h,H as u};
