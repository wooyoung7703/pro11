import{j as Ot,k as g,c as x,d as Rt,a as u,b as t,i as M,B as ut,f as S,F as W,r as U,t as i,e as d,x as Yt,m as It,n as O,A as o,p as Q,E as Gt,q as Jt,C as Vt,v as rt,z as Kt}from"./index-BtrOmqR2.js";import lt from"./http-CilSfrpq.js";import{u as Nt}from"./ohlcv-BSjv8p1h.js";import{u as Wt}from"./inference-Cw5xx8qd.js";import{_ as Ut}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Qt=Ot("calibration",()=>{const Y=g(!1),b=g(null),T=g(null),j=g(null),$=g(null),_=g(3600),f=g(10),E=g(null),C=g([]),A=g(null),P=g(!0),D=g(15);let L=null;const I=x(()=>{var r,y,q,p;const n=(r=$.value)==null?void 0:r.ece,k=((q=(y=E.value)==null?void 0:y.last_snapshot)==null?void 0:q.prod_ece)??((p=T.value)==null?void 0:p.ece);return typeof n=="number"&&typeof k=="number"?Math.abs(n-k):null}),V=x(()=>{var n;return((n=E.value)==null?void 0:n.recommend_retrain)===!0}),w=x(()=>{var n;return((n=E.value)==null?void 0:n.recommend_retrain_reasons)||[]}),X=x(()=>C.value.slice().sort((n,k)=>Math.abs(k.z_score)-Math.abs(n.z_score)).slice(0,5));function tt(n){if(!n)return null;const k=(n.reliability_bins||[]).map(r=>({bin_lower:r.bin_lower??r.bin??r.lower,bin_upper:r.bin_upper??r.upper,count:r.count,mean_pred_prob:r.mean_pred_prob??r.mean_prob,empirical_prob:r.empirical_prob??r.empirical,gap:r.gap??r.abs_diff}));return{brier:n.brier,ece:n.ece,mce:n.mce,reliability_bins:k}}function z(n){return n?{brier:n.brier,ece:n.ece,mce:n.mce,reliability_bins:n.reliability_bins}:null}async function et(){const n=await lt.get("/api/models/production/calibration");n.data.status==="ok"&&(T.value=tt(n.data.calibration),j.value=n.data.model_version)}async function Z(){const n=Nt(),k=Wt(),r={window_seconds:_.value,bins:f.value};n.symbol&&(r.symbol=n.symbol),n.interval&&(r.interval=n.interval),k.selectedTarget&&(r.target=k.selectedTarget);const y=await lt.get("/api/inference/calibration/live",{params:r});if(y.data.status!=="ok"){y.data.status!=="no_data"&&(b.value=y.data.status);return}$.value=z(y.data)}async function G(){const n=await lt.get("/api/monitor/calibration/status");E.value=n.data}async function J(){var n,k;try{const r=await lt.get("/api/features/drift/scan"),y=[],q=((n=r.data)==null?void 0:n.features)||((k=r.data)==null?void 0:k.results)||r.data;if(Array.isArray(q))for(const p of q){const N=p.z_score??p.z??0;y.push({feature:p.feature||p.name||"unknown",z_score:N,drift:!!p.drift})}C.value=y}catch{}}async function R(){Y.value=!0,b.value=null;try{await Promise.all([et(),Z(),G(),J()]),A.value=Date.now()}catch(n){b.value=n.__friendlyMessage||n.message||"fetch failed"}finally{Y.value=!1}}function c(){m(),P.value&&(L=setInterval(R,Math.max(5,D.value)*1e3))}function m(){L&&clearInterval(L),L=null}function a(n){P.value=typeof n=="boolean"?n:!P.value,P.value&&R(),c()}function v(n){D.value=Math.max(5,n),c()}function F(n){_.value=Math.max(60,Math.floor(n)),Z()}function H(n){f.value=Math.min(50,Math.max(5,Math.floor(n))),Z()}return{loading:Y,error:b,prod:T,prodVersion:j,live:$,monitor:E,driftFeatures:C,lastUpdated:A,auto:P,intervalSec:D,deltaECE:I,recommendation:V,reasons:w,topDrift:X,liveWindowSeconds:_,liveBins:f,fetchAll:R,startAuto:c,stopAuto:m,toggleAuto:a,setIntervalSec:v,setLiveWindowSeconds:F,setLiveBins:H}}),Xt={class:"w-full"},te={class:"flex items-center justify-between mb-1"},ee={class:"flex items-center gap-3 text-[10px]"},ne={class:"flex items-center gap-1"},se={class:"flex items-center gap-1"},oe=["viewBox","height"],le=["width","height"],ae=["width","height"],ie=["y1","x2"],re=["x1","x2","y1","y2"],ue=["x","y"],de=["x1","y1","y2"],ce=["x","y"],pe=["points"],me=["cx","cy","r"],xe=["points"],fe=["cx","cy","r"],ve=["x","y"],h=28,dt="#34d399",ct="#f59e0b",be=Rt({__name:"ReliabilityChart",props:{binsLive:{},binsProd:{},width:{},height:{}},setup(Y){const b=Y,T=x(()=>b.width??320),j=x(()=>b.height??220),$=[0,.5,1],_=x(()=>T.value-h*2),f=x(()=>j.value-h*2);function E(c){return Math.max(0,Math.min(1,c))}function C(c){return h+E(c)*_.value}function A(c){return h+(1-E(c))*f.value}function P(c){return c.map(m=>m.join(",")).join(" ")}function D(c){if(!Array.isArray(c))return{pts:[],xs:[],ys:[],counts:[]};const m=c.map((p,N)=>({x:Number(p.mean_pred_prob),y:Number(p.empirical_prob),c:Number(p.count)||0,idx:N})).filter(p=>isFinite(p.x)&&isFinite(p.y)).sort((p,N)=>p.x-N.x),a=m.map(p=>p.x),v=m.map(p=>p.y),F=m.map(p=>p.c),H=a.length?Math.min(...a):0,r=(a.length?Math.max(...a):0)-H<.02?Math.min(6,_.value*.02):0,y=m.length;return{pts:m.map((p,N)=>{const at=r?(N-(y-1)/2)/Math.max(1,y-1)*r:0;return[C(p.x)+at,A(p.y)]}),xs:a,ys:v,counts:F}}const L=x(()=>D(b.binsLive)),I=x(()=>D(b.binsProd)),V=x(()=>L.value.pts),w=x(()=>I.value.pts),X=x(()=>V.value.length>=2&&Math.max(...L.value.xs||[0])-Math.min(...L.value.xs||[0])>=.02),tt=x(()=>w.value.length>=2&&Math.max(...I.value.xs||[0])-Math.min(...I.value.xs||[0])>=.02);function z(c){const m=c.length?Math.max(...c):0;return a=>{const v=c[a]||0;if(m<=0)return 2;const F=2+3*Math.sqrt(v/m);return Math.max(2,Math.min(5,F))}}const et=x(()=>z(L.value.counts)),Z=x(()=>z(I.value.counts));function G(c,m){const a=Array.isArray(c)?c.filter(n=>n&&n.mean_pred_prob!=null&&n.empirical_prob!=null)[m]:void 0;if(!a)return"";const v=typeof a.mean_pred_prob=="number"?a.mean_pred_prob.toFixed(3):"-",F=typeof a.empirical_prob=="number"?a.empirical_prob.toFixed(3):"-",H=a.count??0;return`mean=${v}, empirical=${F}, n=${H}`}const J=c=>G(b.binsLive,c),R=c=>G(b.binsProd,c);return(c,m)=>(d(),u("div",Xt,[t("div",te,[m[2]||(m[2]=t("h3",{class:"text-xs text-neutral-400"},"신뢰도 곡선",-1)),t("div",ee,[t("span",ne,[t("span",{class:"inline-block w-3 h-0.5",style:ut({background:dt})},null,4),m[0]||(m[0]=M(" Live",-1))]),t("span",se,[t("span",{class:"inline-block w-3 h-0.5",style:ut({background:ct})},null,4),m[1]||(m[1]=M(" Prod",-1))])])]),(d(),u("svg",{viewBox:`0 0 ${T.value} ${j.value}`,width:"100%",height:j.value,role:"img","aria-label":"reliability diagram"},[t("rect",{x:0,y:0,width:T.value,height:j.value,fill:"transparent"},null,8,le),t("rect",{x:h,y:h,width:_.value,height:f.value,fill:"none",stroke:"#404040","stroke-width":"1"},null,8,ae),t("line",{x1:h,y1:h+f.value,x2:h+_.value,y2:h,stroke:"#6b7280","stroke-dasharray":"4 3","stroke-width":"1"},null,8,ie),(d(),u(W,null,U($,a=>t("g",{key:"tx"+a},[t("line",{x1:C(a),x2:C(a),y1:h+f.value,y2:h+f.value+4,stroke:"#6b7280","stroke-width":"1"},null,8,re),t("text",{x:C(a),y:h+f.value+12,"text-anchor":"middle",fill:"#9ca3af","font-size":"9"},i(a),9,ue)])),64)),(d(),u(W,null,U($,a=>t("g",{key:"ty"+a},[t("line",{x1:h-4,x2:h,y1:A(a),y2:A(a),stroke:"#6b7280","stroke-width":"1"},null,8,de),t("text",{x:h-6,y:A(a)+3,"text-anchor":"end",fill:"#9ca3af","font-size":"9"},i(a),9,ce)])),64)),tt.value?(d(),u("polyline",{key:0,points:P(w.value),stroke:ct,fill:"none","stroke-width":"1.5"},null,8,pe)):S("",!0),(d(!0),u(W,null,U(w.value,(a,v)=>(d(),u("g",{key:"pp"+v},[t("circle",{cx:a[0],cy:a[1],r:Z.value(v),fill:ct},[t("title",null,i(R(v)),1)],8,me)]))),128)),X.value?(d(),u("polyline",{key:1,points:P(V.value),stroke:dt,fill:"none","stroke-width":"1.5"},null,8,xe)):S("",!0),(d(!0),u(W,null,U(V.value,(a,v)=>(d(),u("g",{key:"lp"+v},[t("circle",{cx:a[0],cy:a[1],r:et.value(v),fill:dt},[t("title",null,i(J(v)),1)],8,fe)]))),128)),!V.value.length&&!w.value.length?(d(),u("text",{key:2,x:h+_.value/2,y:h+f.value/2,"text-anchor":"middle",fill:"#9ca3af","font-size":"11"},"데이터 없음",8,ve)):S("",!0)],8,oe))]))}}),_e=Ut(be,[["__scopeId","data-v-9c22c3b5"]]),he={class:"space-y-6"},ye={class:"card space-y-4"},ge={class:"flex items-center justify-between"},we={class:"flex items-center gap-3"},ke={class:"text-xl font-semibold flex items-center gap-2"},Ce={class:"text-[11px] text-neutral-400"},Me={class:"font-mono"},$e={class:"font-mono"},Ee={class:"flex items-center gap-3 text-xs"},Le={class:"flex items-center gap-1"},ze=["value"],Fe={class:"flex items-center gap-1"},Se=["value"],Ae=["disabled"],Be={class:"flex items-center gap-1 cursor-pointer select-none"},je={class:"flex items-center gap-1"},Pe={class:"flex items-center gap-1"},Te={class:"flex items-center gap-1"},De={class:"flex items-center gap-1"},Ie={class:"px-2 py-0.5 rounded bg-neutral-700/60 font-mono"},Ve={class:"flex items-center gap-1"},Re=["disabled"],Ne={key:0,class:"px-2 py-0.5 rounded bg-brand-danger/20 text-brand-danger"},We={key:0,class:"text-[11px] text-amber-300 bg-amber-500/10 border border-amber-500/30 px-2 py-1 rounded"},Ue={class:"grid md:grid-cols-3 gap-6"},qe={class:"p-4 rounded bg-neutral-800/50 border border-neutral-700 space-y-3"},Ze={class:"space-y-2 text-xs"},He={class:"flex justify-between"},Oe={class:"font-mono"},Ye={class:"flex justify-between"},Ge={class:"flex justify-between"},Je={class:"flex justify-between"},Ke={class:"font-mono"},Qe={class:"flex justify-between"},Xe={class:"font-mono"},tn={class:"pt-2"},en={key:0,class:"h-2 w-full rounded bg-neutral-700 overflow-hidden"},nn={class:"mt-3"},sn={class:"p-4 rounded bg-neutral-800/50 border border-neutral-700 space-y-3"},on={class:"text-sm font-semibold flex items-center gap-2"},ln={key:0,class:"text-[10px] px-2 py-0.5 rounded bg-amber-500/20 text-amber-300"},an={class:"grid grid-cols-2 gap-2 text-xs"},rn={class:"p-2 rounded bg-neutral-700/40"},un={class:"font-mono"},dn={class:"p-2 rounded bg-neutral-700/40"},cn={class:"font-mono"},pn={class:"p-2 rounded bg-neutral-700/40 col-span-2"},mn={class:"text-neutral-400 flex justify-between items-center"},xn={class:"font-mono text-[10px]"},fn={class:"h-2 w-full rounded bg-neutral-700 overflow-hidden mt-1"},vn={key:0,class:"text-xs space-y-1"},bn={class:"list-disc list-inside"},_n={key:1,class:"text-[10px] text-neutral-500"},hn={class:"p-4 rounded bg-neutral-800/50 border border-neutral-700 space-y-3"},yn={class:"w-full text-[11px]"},gn={class:"py-1 pr-2 font-mono"},wn={class:"py-1 text-right"},kn={key:0},Cn={class:"card space-y-4"},Mn={class:"grid md:grid-cols-2 gap-6"},$n={class:"w-full text-[11px]"},En={class:"py-1 font-mono"},Ln={class:"py-1 font-mono text-right"},zn={class:"py-1 font-mono text-right"},Fn={key:0},Sn={class:"w-full text-[11px]"},An={class:"py-1 font-mono"},Bn={class:"py-1 font-mono text-right"},jn={class:"py-1 font-mono text-right"},Pn={key:0},Tn=Rt({__name:"Calibration",setup(Y){const b=Qt(),{loading:T,error:j,prod:$,live:_,monitor:f,auto:E,intervalSec:C,deltaECE:A,recommendation:P,reasons:D,topDrift:L,liveWindowSeconds:I,liveBins:V}=Yt(b),{fetchAll:w,toggleAuto:X,setIntervalSec:tt}=b,z=Nt(),et=x(()=>z.symbol),Z=x(()=>z.interval),G=["1m","3m","5m","15m","30m","1h","2h","4h","6h","12h","1d"],J=Wt(),R=J.selectedTarget;function c(l){const e=l.target.value;(e==="direction"||e==="bottom")&&(J.setTarget(e),w())}It(()=>{z.interval||z.initDefaults(z.symbol,"15m"),w(),b.startAuto()});function m(){w()}const a=x(()=>A.value==null?"—":A.value.toFixed(4)),v=g(3600),F=g(10);It(()=>{v.value=I.value||3600,F.value=V.value||10});function H(){const l=v.value;typeof b.setLiveWindowSeconds=="function"?b.setLiveWindowSeconds(l):(I.value=Math.max(60,Math.floor(l)),w())}function n(){const l=F.value;typeof b.setLiveBins=="function"?b.setLiveBins(l):(V.value=Math.min(50,Math.max(5,Math.floor(l))),w())}const k=x(()=>{var e,B;const l=(B=(e=f.value)==null?void 0:e.last_snapshot)==null?void 0:B.sample_count;return typeof l=="number"?l:"—"}),r=g(120),y=g(!1);async function q(){try{y.value=!0,await lt.post("/api/inference/labeler/run",null,{params:{force:!0,min_age_seconds:Math.max(0,Math.floor(r.value)),limit:1e3}}),setTimeout(()=>{w()},500)}catch{}finally{y.value=!1}}const p=x(()=>{var B;const l=(B=_.value)==null?void 0:B.ece;return typeof l!="number"?"0%":Math.min(.2,Math.max(0,l))/.2*100+"%"}),N=x(()=>{var B,nt,st,ot;const l=(nt=(B=f.value)==null?void 0:B.last_snapshot)==null?void 0:nt.delta,e=(ot=(st=f.value)==null?void 0:st.last_snapshot)==null?void 0:ot.abs_threshold;return typeof l=="number"&&typeof e=="number"&&e>0?Math.min(1,l/e)*100+"%":"0%"});function at(l){return l.bin_lower!=null&&l.bin_upper!=null?`${l.bin_lower.toFixed(2)}-${l.bin_upper.toFixed(2)}`:"-"}function K(l){return typeof l=="number"?l.toFixed(3):"—"}function pt(l){return typeof l!="number"?"text-neutral-500":l>.08?"text-brand-danger":l>.04?"text-amber-400":"text-brand-accent"}function qt(l){return typeof l!="number"?"text-neutral-500":l>.08?"text-brand-danger":l>.04?"text-amber-400":"text-brand-accent"}function Zt(l){return typeof l!="number"?"text-neutral-500":l>.08?"text-brand-danger":l>.04?"text-amber-400":"text-brand-accent"}function Ht(l){const e=Math.abs(l);return e>3?"text-brand-danger":e>2?"text-amber-400":"text-brand-accent"}return(l,e)=>{var B,nt,st,ot,mt,xt,ft,vt,bt,_t,ht,yt,gt,wt,kt,Ct,Mt,$t,it,Et,Lt,zt,Ft,St,At,Bt,jt,Pt,Tt,Dt;return d(),u("div",he,[t("section",ye,[t("div",ge,[t("div",we,[t("h1",ke,[e[10]||(e[10]=M(" 캘리브레이션 & 드리프트 ",-1)),t("span",{class:O(["text-[10px] px-2 py-0.5 rounded border border-neutral-700",o(R)==="bottom"?"bg-indigo-700/20 text-indigo-300":"bg-neutral-700/20 text-neutral-300"]),title:"현재 추론 타겟"},i(o(R)),3)]),t("span",Ce,[e[11]||(e[11]=M("컨텍스트: ",-1)),t("span",Me,i(et.value),1),e[12]||(e[12]=M(" · ",-1)),t("span",$e,i(Z.value||"—"),1)])]),t("div",Ee,[t("div",Le,[e[14]||(e[14]=M(" target ",-1)),t("select",{class:"input py-0.5",value:o(R),onChange:e[0]||(e[0]=s=>c(s))},[...e[13]||(e[13]=[t("option",{value:"direction"},"direction",-1),t("option",{value:"bottom"},"bottom",-1)])],40,ze)]),t("div",Fe,[e[15]||(e[15]=M(" 인터벌 ",-1)),Q(t("select",{class:"input py-0.5","onUpdate:modelValue":e[1]||(e[1]=s=>o(z).interval=s),onChange:m},[(d(),u(W,null,U(G,s=>t("option",{key:s,value:s},i(s),9,Se)),64))],544),[[Gt,o(z).interval]])]),t("button",{class:"btn",disabled:o(T),onClick:e[2]||(e[2]=(...s)=>o(w)&&o(w)(...s))},"새로고침",8,Ae),t("label",Be,[Q(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>Vt(E)?E.value=s:null),onChange:e[4]||(e[4]=s=>o(X)())},null,544),[[Jt,o(E)]]),e[16]||(e[16]=M(" 자동 ",-1))]),t("div",je,[e[17]||(e[17]=M(" 주기 ",-1)),Q(t("input",{type:"range",min:"5",max:"120","onUpdate:modelValue":e[5]||(e[5]=s=>Vt(C)?C.value=s:null),onChange:e[6]||(e[6]=s=>o(tt)(o(C)))},null,544),[[rt,o(C),void 0,{number:!0}]]),t("span",null,i(o(C))+"s",1)]),t("div",Pe,[e[18]||(e[18]=M(" live_window ",-1)),Q(t("input",{class:"input w-24 py-0.5",type:"number",min:"60",step:"60","onUpdate:modelValue":e[7]||(e[7]=s=>v.value=s),onChange:H},null,544),[[rt,v.value,void 0,{number:!0}]]),e[19]||(e[19]=t("span",{class:"text-neutral-400 text-[10px]"},"sec",-1))]),t("div",Te,[e[20]||(e[20]=M(" bins ",-1)),Q(t("input",{class:"input w-16 py-0.5",type:"number",min:"5",max:"50",step:"1","onUpdate:modelValue":e[8]||(e[8]=s=>F.value=s),onChange:n},null,544),[[rt,F.value,void 0,{number:!0}]])]),t("div",De,[e[21]||(e[21]=t("span",{class:"text-neutral-400"},"라벨 수",-1)),t("span",Ie,i(k.value),1)]),t("div",Ve,[e[22]||(e[22]=t("span",{class:"text-neutral-400"},"min_age",-1)),Q(t("input",{class:"input w-16 py-0.5",type:"number",min:"0",step:"10","onUpdate:modelValue":e[9]||(e[9]=s=>r.value=s)},null,512),[[rt,r.value,void 0,{number:!0}]]),t("button",{class:"btn",disabled:y.value,onClick:q},"라벨러 실행",8,Re)]),o(j)?(d(),u("span",Ne,i(o(j)),1)):S("",!0)])]),e[39]||(e[39]=t("p",{class:"text-xs text-neutral-400"},"실시간 추론의 캘리브레이션 상태를 프로덕션 모델과 비교하고, ECE 드리프트 감지 및 재학습 추천 상태를 표시합니다.",-1)),((B=o(_))==null?void 0:B.ece)==null?(d(),u("div",We,[...e[23]||(e[23]=[M(" 라이브 ECE는 최근 창(window) 내에 ",-1),t("b",null,"실현 라벨(realized)",-1),M("이 있어야 계산됩니다. 자동 라벨러를 활성화하거나(Admin → run labeler), 시간이 지난 뒤 다시 확인하세요. ",-1)])])):S("",!0),t("div",Ue,[t("div",qe,[e[30]||(e[30]=t("h2",{class:"text-sm font-semibold"},"라이브 vs 프로덕션",-1)),t("div",Ze,[t("div",He,[e[24]||(e[24]=t("span",{class:"text-neutral-400"},"프로덕션 ECE",-1)),t("span",Oe,i(((st=(nt=o($))==null?void 0:nt.ece)==null?void 0:st.toFixed(4))??"—"),1)]),t("div",Ye,[e[25]||(e[25]=t("span",{class:"text-neutral-400"},"라이브 ECE",-1)),t("span",{class:O(["font-mono",qt((ot=o(_))==null?void 0:ot.ece)])},i(((xt=(mt=o(_))==null?void 0:mt.ece)==null?void 0:xt.toFixed(4))??"—"),3)]),t("div",Ge,[e[26]||(e[26]=t("span",{class:"text-neutral-400"},"Δ ECE",-1)),t("span",{class:O(["font-mono",Zt(o(A))])},i(a.value),3)]),t("div",Je,[e[27]||(e[27]=t("span",{class:"text-neutral-400"},"Live Brier",-1)),t("span",Ke,i(((vt=(ft=o(_))==null?void 0:ft.brier)==null?void 0:vt.toFixed(4))??"—"),1)]),t("div",Qe,[e[28]||(e[28]=t("span",{class:"text-neutral-400"},"Prod Brier",-1)),t("span",Xe,i(((_t=(bt=o($))==null?void 0:bt.brier)==null?void 0:_t.toFixed(4))??"—"),1)]),t("div",tn,[((ht=o(_))==null?void 0:ht.ece)!=null&&((yt=o($))==null?void 0:yt.ece)!=null?(d(),u("div",en,[t("div",{class:"h-full bg-brand-accent transition-all",style:ut({width:p.value})},null,4)])):S("",!0),e[29]||(e[29]=t("div",{class:"text-[10px] text-neutral-500 mt-1"},"막대 = 라이브 ECE (0~0.2 스케일 제한)",-1))])]),t("div",nn,[Kt(_e,{"bins-live":(gt=o(_))==null?void 0:gt.reliability_bins,"bins-prod":(wt=o($))==null?void 0:wt.reliability_bins,height:220},null,8,["bins-live","bins-prod"])])]),t("div",sn,[t("h2",on,[e[31]||(e[31]=M("모니터 ",-1)),o(P)?(d(),u("span",ln,"재학습 추천")):S("",!0)]),t("div",an,[t("div",rn,[e[32]||(e[32]=t("div",{class:"text-neutral-400"},"절대 편차 연속",-1)),t("div",un,i(((kt=o(f))==null?void 0:kt.abs_streak)??0),1)]),t("div",dn,[e[33]||(e[33]=t("div",{class:"text-neutral-400"},"상대 편차 연속",-1)),t("div",cn,i(((Ct=o(f))==null?void 0:Ct.rel_streak)??0),1)]),t("div",pn,[t("div",mn,[e[34]||(e[34]=t("span",null,"델타 / 절대임계",-1)),t("span",xn,i(((Et=(it=($t=(Mt=o(f))==null?void 0:Mt.last_snapshot)==null?void 0:$t.abs_threshold)==null?void 0:it.toFixed)==null?void 0:Et.call(it,3))??"-"),1)]),t("div",fn,[t("div",{class:"h-full bg-brand-danger",style:ut({width:N.value})},null,4)])])]),o(D).length?(d(),u("div",vn,[e[35]||(e[35]=t("div",{class:"text-neutral-400"},"사유",-1)),t("ul",bn,[(d(!0),u(W,null,U(o(D),s=>(d(),u("li",{key:s,class:"font-mono"},i(s),1))),128))])])):S("",!0),((zt=(Lt=o(f))==null?void 0:Lt.last_snapshot)==null?void 0:zt.sample_count)!=null?(d(),u("div",_n,"샘플수: "+i((St=(Ft=o(f))==null?void 0:Ft.last_snapshot)==null?void 0:St.sample_count),1)):S("",!0)]),t("div",hn,[e[38]||(e[38]=t("h2",{class:"text-sm font-semibold"},"상위 드리프트 Z",-1)),t("table",yn,[e[37]||(e[37]=t("thead",{class:"text-neutral-400"},[t("tr",null,[t("th",{class:"text-left pb-1"},"특징"),t("th",{class:"text-right pb-1"},"Z"),t("th",{class:"text-right pb-1"},"드리프트")])],-1)),t("tbody",null,[(d(!0),u(W,null,U(o(L),s=>(d(),u("tr",{key:s.feature,class:"border-t border-neutral-800/60"},[t("td",gn,i(s.feature),1),t("td",{class:O(["py-1 pr-2 font-mono",Ht(s.z_score)])},i(s.z_score.toFixed(3)),3),t("td",wn,[t("span",{class:O(s.drift?"text-brand-danger":"text-neutral-500")},i(s.drift?"Y":"N"),3)])]))),128)),o(L).length===0?(d(),u("tr",kn,[...e[36]||(e[36]=[t("td",{colspan:"3",class:"text-center text-neutral-500 py-2"},"데이터 없음",-1)])])):S("",!0)])])])])]),t("section",Cn,[e[46]||(e[46]=t("h2",{class:"text-sm font-semibold"},"신뢰 구간",-1)),t("div",Mn,[t("div",null,[e[42]||(e[42]=t("h3",{class:"text-xs text-neutral-400 mb-1"},"라이브",-1)),t("table",$n,[e[41]||(e[41]=t("thead",{class:"text-neutral-400"},[t("tr",null,[t("th",{class:"text-left"},"구간"),t("th",{class:"text-right"},"평균"),t("th",{class:"text-right"},"경험"),t("th",{class:"text-right"},"격차")])],-1)),t("tbody",null,[(d(!0),u(W,null,U(((At=o(_))==null?void 0:At.reliability_bins)||[],s=>(d(),u("tr",{key:"l"+s.bin_lower,class:"border-t border-neutral-800/50"},[t("td",En,i(at(s)),1),t("td",Ln,i(K(s.mean_pred_prob)),1),t("td",zn,i(K(s.empirical_prob)),1),t("td",{class:O(["py-1 font-mono text-right",pt(s.gap)])},i(K(s.gap)),3)]))),128)),(jt=(Bt=o(_))==null?void 0:Bt.reliability_bins)!=null&&jt.length?S("",!0):(d(),u("tr",Fn,[...e[40]||(e[40]=[t("td",{colspan:"4",class:"text-center text-neutral-500 py-2"},"데이터 없음",-1)])]))])])]),t("div",null,[e[45]||(e[45]=t("h3",{class:"text-xs text-neutral-400 mb-1"},"프로덕션",-1)),t("table",Sn,[e[44]||(e[44]=t("thead",{class:"text-neutral-400"},[t("tr",null,[t("th",{class:"text-left"},"구간"),t("th",{class:"text-right"},"평균"),t("th",{class:"text-right"},"경험"),t("th",{class:"text-right"},"격차")])],-1)),t("tbody",null,[(d(!0),u(W,null,U(((Pt=o($))==null?void 0:Pt.reliability_bins)||[],s=>(d(),u("tr",{key:"p"+s.bin_lower,class:"border-t border-neutral-800/50"},[t("td",An,i(at(s)),1),t("td",Bn,i(K(s.mean_pred_prob)),1),t("td",jn,i(K(s.empirical_prob)),1),t("td",{class:O(["py-1 font-mono text-right",pt(s.gap)])},i(K(s.gap)),3)]))),128)),(Dt=(Tt=o($))==null?void 0:Tt.reliability_bins)!=null&&Dt.length?S("",!0):(d(),u("tr",Pn,[...e[43]||(e[43]=[t("td",{colspan:"4",class:"text-center text-neutral-500 py-2"},"데이터 없음",-1)])]))])])])])])])}}}),Wn=Ut(Tn,[["__scopeId","data-v-0a5853da"]]);export{Wn as default};
