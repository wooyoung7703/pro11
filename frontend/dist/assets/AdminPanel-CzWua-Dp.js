import{d as at,k as f,c as te,m as Te,l as E,H as lt,o as st,a as u,e as d,z as nt,O as Re,b as t,f as S,t as r,p,E as ae,v as w,A as re,i as y,q as R,F as W,r as X,n as A}from"./index-BtrOmqR2.js";import{C as ot,c as $}from"./confirmPresets-CzcHK0BG.js";import V from"./http-CilSfrpq.js";import{c as Ve}from"./sse-Bs9vxAPf.js";import{_ as rt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const it={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},ut={class:"space-y-6"},dt={class:"card space-y-4"},vt={class:"flex items-center justify-between"},pt={class:"flex items-center gap-2 text-xs"},ct={key:0,class:"px-2 py-0.5 rounded bg-brand-danger/20 text-brand-danger"},mt={key:1,class:"px-2 py-0.5 rounded bg-brand-accent/20 text-brand-accent"},ft={class:"grid md:grid-cols-2 gap-6"},bt={class:"p-4 rounded bg-neutral-800/50 border border-neutral-700 space-y-3"},xt={class:"flex flex-wrap gap-2 text-xs"},gt=["disabled"],yt=["disabled"],_t=["disabled"],kt=["disabled"],wt={class:"grid grid-cols-2 gap-2 text-[11px]"},St={class:"flex items-center gap-2",title:"학습 타겟"},ht={key:0,class:"flex items-center gap-2",title:"lookahead (bars)"},Ct={key:1,class:"flex items-center gap-2",title:"min drawdown"},At={key:2,class:"flex items-center gap-2",title:"min rebound"},Ut={class:"grid grid-cols-2 gap-2 text-[11px]"},Et={class:"flex items-center gap-2",title:"라벨러 입력 최소 연령(초)"},Mt={class:"flex items-center gap-2",title:"라벨러 배치 제한"},Tt={class:"flex items-center gap-3 text-[11px]"},Rt=["title"],Vt={class:"flex items-center gap-2",title:"SSE 실시간 갱신"},It=["disabled"],Lt={key:0,class:"mt-2 text-[10px] font-mono text-neutral-300 flex flex-wrap gap-1"},Ot={class:"p-4 rounded bg-neutral-800/50 border border-neutral-700 space-y-3"},Bt={class:"grid grid-cols-2 gap-2 text-[11px]"},Nt={class:"flex items-center gap-2"},Dt={class:"flex items-center gap-2"},Pt={class:"flex items-center gap-2"},Ft={class:"flex items-center gap-2"},jt={class:"flex items-center gap-2"},qt={class:"flex items-center gap-2"},$t={class:"grid grid-cols-3 gap-2 text-[11px]"},Jt={class:"flex flex-wrap gap-2 text-[11px] items-center"},zt={class:"flex flex-wrap gap-2 text-xs"},Kt=["disabled"],Ht=["disabled"],Wt=["disabled"],Xt=["disabled"],Gt={class:"text-[11px] text-neutral-400 mt-1"},Qt={class:"font-mono"},Yt={key:0,class:"text-[11px] bg-neutral-900/70 border border-neutral-700 rounded"},Zt={class:"flex items-center gap-2 border-b border-neutral-800 px-2 py-1"},ea={key:0,class:"p-2 grid grid-cols-2 md:grid-cols-3 gap-2"},ta={class:"p-2 rounded bg-neutral-800/40 border border-neutral-700"},aa={class:"p-2 rounded bg-neutral-800/40 border border-neutral-700"},la={class:"p-2 rounded bg-neutral-800/40 border border-neutral-700"},sa={class:"font-mono text-neutral-200"},na={class:"p-2 rounded bg-neutral-800/40 border border-neutral-700"},oa={class:"font-mono text-neutral-200"},ra={class:"p-2 rounded bg-neutral-800/40 border border-neutral-700 col-span-2 md:col-span-1 flex items-center justify-between"},ia={class:"ml-2 text-[10px] text-neutral-500"},ua={key:1,class:"p-2"},da={class:"w-full text-[11px]"},va={class:"py-1 px-1 text-neutral-400"},pa={class:"py-1 px-1 font-mono"},ca={key:0},ma={key:2,class:"p-2 font-mono"},fa={class:"whitespace-pre-wrap"},ba={class:"p-4 rounded bg-neutral-800/50 border border-neutral-700 space-y-3"},xa={class:"text-sm font-semibold flex items-center gap-2"},ga=["disabled"],ya={key:0,class:"space-y-2 text-xs font-mono"},_a={class:"flex justify-between"},ka={class:"flex justify-between"},wa={class:"flex justify-between"},Sa={class:"flex justify-between"},ha={class:"pt-1 text-neutral-400"},Ca={class:"w-full text-[10px]"},Aa={class:"py-0.5"},Ua={class:"py-0.5 text-right"},Ea={class:"py-0.5 text-right"},Ma={key:0},Ta={key:1,class:"text-xs text-neutral-500"},Ra={class:"p-4 rounded bg-neutral-800/50 border border-neutral-700 space-y-3"},Va={class:"text-sm font-semibold flex items-center gap-2"},Ia=["disabled"],La=["disabled"],Oa={class:"grid grid-cols-2 gap-2 text-[11px]"},Ba={class:"p-2 rounded bg-neutral-800/40 border border-neutral-700 flex items-center justify-between"},Na={class:"p-2 rounded bg-neutral-800/40 border border-neutral-700 flex items-center justify-between"},Da={class:"p-2 rounded bg-neutral-800/40 border border-neutral-700 flex items-center justify-between"},Pa={class:"p-2 rounded bg-neutral-800/40 border border-neutral-700 flex items-center justify-between"},Fa={class:"text-[10px] text-neutral-500"},ja={key:0,class:"text-[11px] opacity-90"},qa={class:"mt-1 space-y-1 font-mono"},$a=["title"],Ja={class:"card space-y-3"},za={class:"flex items-center justify-between"},Ka={class:"flex flex-wrap items-center gap-2 text-[11px]"},Ha={class:"flex items-center gap-1"},Wa={class:"flex items-center gap-1"},Xa={class:"flex items-center gap-1"},Ga={class:"flex items-center gap-1"},Qa={class:"flex items-center gap-1"},Ya={class:"flex items-center gap-1"},Za={class:"flex items-center gap-1"},el={class:"flex items-center gap-1"},tl={class:"flex items-center gap-1"},al={class:"flex items-center gap-1"},ll=["disabled"],sl={class:"flex items-center gap-1"},nl=["disabled"],ol={class:"overflow-auto"},rl={class:"w-full text-[11px]"},il={class:"py-1 px-1"},ul={class:"py-1 px-1"},dl={class:"py-1 px-1"},vl={class:"py-1 px-1"},pl={class:"py-1 px-1 text-right"},cl={class:"py-1 px-1 text-right"},ml={class:"py-1 px-1 text-right"},fl={class:"py-1 px-1"},bl=["title"],xl={class:"py-1 px-1"},gl=["onClick"],yl={key:0},_l={class:"flex items-center justify-between text-[11px]"},kl={class:"text-neutral-400"},wl={class:"flex items-center gap-2"},Sl=["disabled"],hl=["disabled"],Cl={key:0,class:"text-[11px] opacity-90"},Al={class:"cursor-pointer"},Ul={class:"bg-neutral-900/70 border border-neutral-700 rounded p-2 overflow-auto"},El={class:"card space-y-4"},Ml=["value"],Ie="admin_bootstrap_form_v1",Tl=at({__name:"AdminPanel",setup(Rl){const c=f({fastUpgrade:!1,training:!1,labeler:!1,risk:!1,schema:!1,bootstrap:!1,featBackfill:!1,artifacts:!1}),v=f(null),b=f(null),M=f(null),J=f([]),G=f([]),_=f({summary:null,rows:[],lastChecked:null}),ie=it||{};function ue(a,e){const o=globalThis[a]??ie[a],i=Number(o);return Number.isFinite(i)&&i>0?i:e}function de(a,e){const o=globalThis[a]??ie[a],i=parseFloat(o);return Number.isFinite(i)?i:e}const ve=ue("VITE_RISK_AUTO_INTERVAL_MS",15e3),pe=ue("VITE_BACKFILL_POLL_MS",1e4),ce=de("VITE_BOOTSTRAP_MIN_AUC",.65),me=de("VITE_BOOTSTRAP_MAX_ECE",.05),fe=Math.max(1,Math.round(ve/1e3)),Le=Math.max(1,Math.round(pe/1e3)),n=f({backfill_year:!0,fill_gaps:!0,retry_fill_gaps:!0,dry_run:!0,train_sentiment:!0,skip_promotion:!1,feature_target:600,feature_window:null,min_auc:ce,max_ece:me}),h=f(null),O=f("summary"),C=te(()=>{var l,H,Se,he,Ce,Ae,Ue,Ee,Me;const a=h.value||{},e=((l=a==null?void 0:a.metrics)==null?void 0:l.auc)??((H=a==null?void 0:a.report)==null?void 0:H.auc)??((Se=a==null?void 0:a.eval)==null?void 0:Se.auc)??null,o=((he=a==null?void 0:a.metrics)==null?void 0:he.ece)??((Ce=a==null?void 0:a.report)==null?void 0:Ce.ece)??((Ae=a==null?void 0:a.eval)==null?void 0:Ae.ece)??null,i=((Ue=a==null?void 0:a.metrics)==null?void 0:Ue.samples)??((Ee=a==null?void 0:a.report)==null?void 0:Ee.samples)??(a==null?void 0:a.n_samples)??(a==null?void 0:a.samples)??null,m=((Me=a==null?void 0:a.metrics)==null?void 0:Me.window)??(a==null?void 0:a.used_window)??(a==null?void 0:a.window)??n.value.feature_window??null,g=n.value.min_auc??null,U=n.value.max_ece??null,T=typeof e=="number"&&typeof g=="number"?e>=g:null,q=typeof o=="number"&&typeof U=="number"?o<=U:null;let K="N/A";return T!=null&&q!=null&&(K=T&&q?"PASS":"FAIL"),{auc:e,ece:o,samples:i,window:m,minAuc:g,maxEce:U,aucPass:T,ecePass:q,gate:K,aucDisplay:typeof e=="number"?e.toFixed(3):"-",eceDisplay:typeof o=="number"?o.toFixed(3):"-",samplesDisplay:i!=null?String(i):"-",windowDisplay:m!=null?String(m):"-",minAucDisplay:typeof g=="number"?g.toFixed(2):"-",maxEceDisplay:typeof U=="number"?U.toFixed(2):"-"}}),be=te(()=>{var o,i,m,g;const a=h.value;if(!a||typeof a!="object")return[];const e={status:a.status,started_at:a.started_at??a.start_time,finished_at:a.finished_at??a.end_time,model_id:a.model_id??((o=a.model)==null?void 0:o.id),version:(i=a.model)==null?void 0:i.version,used_window:a.used_window??((m=a.metrics)==null?void 0:m.window),requested_target:a.requested_target??((g=a.metrics)==null?void 0:g.target)??n.value.feature_target,train_sentiment:n.value.train_sentiment,dry_run:n.value.dry_run,skip_promotion:n.value.skip_promotion};return Object.entries(e).filter(([U,T])=>T!==void 0).map(([U,T])=>({key:U,value:T}))}),Oe=te(()=>h.value?JSON.stringify(h.value,null,2):""),Q=f(120),Y=f(1e3),B=f(!1),z=f(!1);let I=null;const L=f("direction"),N=f(30),D=f(.005),P=f(.003),k=f({open:!1,title:"",message:"",requireText:void 0,delayMs:1200,onConfirm:null});function F(a){k.value.title=a.title,k.value.message=a.message,k.value.requireText=a.requireText,k.value.delayMs=a.delayMs??1200,k.value.onConfirm=()=>{try{a.onConfirm()}finally{k.value.open=!1}},k.value.open=!0}Te(()=>{try{const a=localStorage.getItem(Ie);if(a){const e=JSON.parse(a);n.value={...n.value,...e}}}catch{}}),E(n,a=>{try{localStorage.setItem(Ie,JSON.stringify(a))}catch{}},{deep:!0});function x(a){J.value.unshift(new Date().toLocaleTimeString()+" "+a),J.value.length>200&&J.value.pop()}function Be(){J.value=[]}async function Ne(){var a;c.value.fastUpgrade=!0,v.value=null,b.value=null;try{const e=await V.post("/admin/fast_startup/upgrade");b.value=((a=e.data)==null?void 0:a.status)||"upgraded",x("[upgrade] "+JSON.stringify(e.data))}catch(e){v.value=e.__friendlyMessage||e.message,x("[upgrade:error] "+v.value)}finally{c.value.fastUpgrade=!1}}async function De(){var a;c.value.training=!0,v.value=null,b.value=null;try{const e={trigger:"manual_ui",target:L.value};L.value==="bottom"&&(e.bottom_lookahead=N.value,e.bottom_drawdown=D.value,e.bottom_rebound=P.value);const o=await V.post("/api/training/run",e);b.value=((a=o.data)==null?void 0:a.status)||"training started",x("[training] "+JSON.stringify(o.data))}catch(e){v.value=e.__friendlyMessage||e.message,x("[training:error] "+v.value)}finally{c.value.training=!1}}async function Pe(){var a,e,o;c.value.artifacts=!0,v.value=null,b.value=null;try{const i=await V.get("/admin/models/artifacts/verify"),m=(a=i.data)==null?void 0:a.summary;_.value.summary=m??null;const g=Array.isArray((e=i.data)==null?void 0:e.rows)?i.data.rows:Array.isArray(i.data)?i.data:[];_.value.rows=g,_.value.lastChecked=new Date().toISOString(),b.value="artifacts verified",x("[artifacts:verify] "+JSON.stringify(((o=i.data)==null?void 0:o.summary)||{}))}catch(i){v.value=i.__friendlyMessage||i.message,x("[artifacts:verify:error] "+v.value)}finally{c.value.artifacts=!1}}async function Fe(){var a;c.value.labeler=!0,v.value=null,b.value=null;try{const e=new URLSearchParams({force:"true",min_age_seconds:String(Math.max(0,Q.value||0)),limit:String(Math.max(1,Y.value||1))}),o=await V.post("/api/inference/labeler/run?"+e.toString());b.value=((a=o.data)==null?void 0:a.status)||"labeler done",x("[labeler] "+JSON.stringify(o.data))}catch(e){v.value=e.__friendlyMessage||e.message,x("[labeler:error] "+v.value)}finally{c.value.labeler=!1}}async function Z(){c.value.risk=!0,v.value=null,b.value=null;try{const a=await V.get("/api/risk/state");M.value=a.data,x("[risk] fetched")}catch(a){v.value=a.__friendlyMessage||a.message,x("[risk:error] "+v.value)}finally{c.value.risk=!1}}async function je(){var a;c.value.schema=!0,v.value=null,b.value=null,G.value=[];try{const o=((a=(await V.post("/api/admin/schema/ensure")).data)==null?void 0:a.tables)||[];G.value=o,b.value="tables ensured ("+o.length+")",x("[schema] ensured "+o.length+" tables")}catch(e){v.value=e.__friendlyMessage||e.message,x("[schema:error] "+v.value)}finally{c.value.schema=!1}}async function le(a){var e;c.value.bootstrap=!0,v.value=null,b.value=null,h.value=null;try{const o={...n.value,dry_run:a||n.value.dry_run},i=await V.post("/admin/bootstrap",o);h.value=i.data,b.value=((e=i.data)==null?void 0:e.status)||"ok",x("[bootstrap] "+JSON.stringify(i.data))}catch(o){v.value=o.__friendlyMessage||o.message,x("[bootstrap:error] "+v.value)}finally{c.value.bootstrap=!1}}function se(a){a==="conservative"?(n.value.min_auc=.7,n.value.max_ece=.03):a==="standard"?(n.value.min_auc=.65,n.value.max_ece=.05):(n.value.min_auc=.6,n.value.max_ece=.08)}function qe(){try{const a=new Blob([JSON.stringify(h.value,null,2)],{type:"application/json"}),e=URL.createObjectURL(a),o=document.createElement("a");o.href=e,o.download="bootstrap_result.json",document.body.appendChild(o),o.click(),setTimeout(()=>{URL.revokeObjectURL(e),o.remove()},0)}catch{}}function $e(){try{if(!h.value)return;const a=JSON.stringify(h.value,null,2);navigator.clipboard.writeText(a),b.value="copied to clipboard"}catch(a){v.value=a.__friendlyMessage||a.message||"copy failed"}}function Je(){n.value.min_auc=ce,n.value.max_ece=me,b.value="reset to defaults"}async function ze(){var a;c.value.featBackfill=!0,v.value=null,b.value=null;try{const e={target:n.value.feature_target};n.value.feature_window&&n.value.feature_window>0&&(e.window=n.value.feature_window);const o=await V.post("/admin/features/backfill",null,{params:e});b.value=((a=o.data)==null?void 0:a.status)||"ok",h.value=o.data,x("[features:backfill] "+JSON.stringify(o.data))}catch(e){v.value=e.__friendlyMessage||e.message,x("[features:backfill:error] "+v.value)}finally{c.value.featBackfill=!1}}let ee=null;const Ke=lt();Te(()=>{try{const a="bootstrap_auto_ran";sessionStorage.getItem(a)||(sessionStorage.setItem(a,"1"),le(!0))}catch{le(!0)}try{const a=Ke.query||{};typeof a.bf_symbol=="string"&&(s.value.symbol=a.bf_symbol),typeof a.bf_interval=="string"&&(s.value.interval=a.bf_interval),typeof a.bf_status=="string"&&(s.value.status=a.bf_status),(a.bf_live==="1"||a.bf_live===1||a.bf_live===!0)&&(s.value.live=!0,s.value.auto=!1)}catch{}try{const a=localStorage.getItem("admin_risk_auto");a!=null&&(B.value=a==="1");const e=localStorage.getItem("admin_risk_live");e!=null&&(z.value=e==="1");const o=localStorage.getItem("admin_training_target");(o==="direction"||o==="bottom")&&(L.value=o);const i=localStorage.getItem("admin_bottom_lookahead");i!=null&&(N.value=Math.max(1,Number(i)||N.value));const m=localStorage.getItem("admin_bottom_drawdown");m!=null&&(D.value=Math.max(0,Number(m)||D.value));const g=localStorage.getItem("admin_bottom_rebound");g!=null&&(P.value=Math.max(0,Number(g)||P.value))}catch{}try{const a=localStorage.getItem("admin_bf_auto");a!=null&&(s.value.auto=a==="1");const e=localStorage.getItem("admin_bf_live");e!=null&&(s.value.live=e==="1")}catch{}j(),Xe(),Z(),ee=setInterval(()=>{B.value&&!z.value&&Z()},ve)}),st(()=>{ye(),oe(),ee&&(clearInterval(ee),ee=null);try{I&&I.close()}catch{}I=null});const s=f({items:[],total:0,symbol:"",interval:"",status:"",startedFrom:"",startedTo:"",page:1,pageSize:50,sortBy:"started_at",order:"desc",detail:null,auto:!0,live:!1,loading:!1,_timer:null,_sse:null}),ne=te(()=>Math.max(1,Math.ceil(s.value.total/Math.max(1,s.value.pageSize))));function xe(a){if(!a)return"-";try{return new Date(a).toLocaleString()}catch{return String(a)}}function He(a){return a==="success"?"bg-emerald-700/30 text-emerald-300 border border-emerald-700/40":a==="running"?"bg-indigo-700/30 text-indigo-300 border border-indigo-700/40":a==="error"?"bg-rose-700/30 text-rose-300 border border-rose-700/40":"bg-neutral-700/30 text-neutral-300 border border-neutral-700/40"}function ge(a){if(!a)return null;try{const e=new Date(a).getTime();return isFinite(e)?Math.floor(e/1e3):null}catch{return null}}async function j(){s.value.loading=!0,v.value=null;try{const a={page:Math.max(1,s.value.page),page_size:Math.max(1,Math.min(200,s.value.pageSize)),sort_by:s.value.sortBy,order:s.value.order};s.value.status&&(a.status=s.value.status),s.value.symbol&&(a.symbol=s.value.symbol),s.value.interval&&(a.interval=s.value.interval);const e=ge(s.value.startedFrom);e&&(a.started_from=e);const o=ge(s.value.startedTo);o&&(a.started_to=o);const i=await V.get("/api/features/backfill/runs",{params:a});if(Array.isArray(i.data))s.value.items=i.data,s.value.total=i.data.length,s.value.page=1;else{const m=i.data;s.value.items=Array.isArray(m.items)?m.items:[],s.value.total=typeof m.total=="number"?m.total:0,s.value.page=typeof m.page=="number"?m.page:s.value.page}}catch(a){v.value=a.__friendlyMessage||a.message}finally{s.value.loading=!1}}async function We(a){try{const e=await V.get(`/api/features/backfill/runs/${a.id}`);s.value.detail=e.data||a}catch{}}function Xe(){ye(),s.value._timer=setInterval(()=>{s.value.auto&&!s.value.live&&j()},pe)}function ye(){s.value._timer&&(clearInterval(s.value._timer),s.value._timer=null)}function _e(){oe();const a=new URLSearchParams;s.value.symbol&&a.set("symbol",s.value.symbol),s.value.interval&&a.set("interval",s.value.interval);const e="/stream/runs"+(a.toString()?"?"+a.toString():"");s.value._sse=Ve({url:e,heartbeatTimeoutMs:2e4},{onMessage:o=>{const i=o==null?void 0:o.data;i&&Array.isArray(i.items)&&(s.value.items=i.items,s.value.total=Math.max(s.value.total,s.value.items.length))}})}function oe(){try{s.value._sse&&s.value._sse.close()}catch{}s.value._sse=null}function Ge(){s.value.page>1&&(s.value.page-=1,j())}function Qe(){s.value.page<ne.value&&(s.value.page+=1,j())}E(()=>[s.value.symbol,s.value.interval,s.value.status,s.value.startedFrom,s.value.startedTo,s.value.pageSize,s.value.sortBy,s.value.order],()=>{s.value.page=1,j(),s.value.live&&_e()}),E(()=>s.value.live,a=>{a?(s.value.auto=!1,_e()):oe()}),E(z,a=>{if(a){B.value=!1;try{I&&I.close()}catch{}I=Ve({url:"/stream/risk",heartbeatTimeoutMs:15e3},{onMessage:e=>{const o=e==null?void 0:e.data;o&&typeof o=="object"&&(M.value=o)}}),E(()=>L.value,e=>{try{localStorage.setItem("admin_training_target",String(e))}catch{}}),E(()=>N.value,e=>{try{localStorage.setItem("admin_bottom_lookahead",String(e))}catch{}}),E(()=>D.value,e=>{try{localStorage.setItem("admin_bottom_drawdown",String(e))}catch{}}),E(()=>P.value,e=>{try{localStorage.setItem("admin_bottom_rebound",String(e))}catch{}})}else{try{I&&I.close()}catch{}I=null}try{localStorage.setItem("admin_risk_live",a?"1":"0")}catch{}}),E(B,a=>{try{localStorage.setItem("admin_risk_auto",a?"1":"0")}catch{}}),E(()=>s.value.auto,a=>{try{localStorage.setItem("admin_bf_auto",a?"1":"0")}catch{}}),E(()=>s.value.live,a=>{try{localStorage.setItem("admin_bf_live",a?"1":"0")}catch{}});function Ye(){F({...$.ensureTables(),onConfirm:()=>{je()}})}function ke(a){F({...$.bootstrapRun(a),onConfirm:()=>{le(a)}})}function Ze(){F({...$.featBackfill(n.value.feature_target,n.value.feature_window),onConfirm:()=>{ze()}})}function we(){F({...$.trainingTrigger(),onConfirm:()=>{De()}})}function et(){F({...$.labelerRun(Q.value,Y.value),onConfirm:()=>{Fe()}})}function tt(){F({...$.fastUpgrade(),onConfirm:()=>{Ne()}})}return(a,e)=>{var o,i,m,g,U,T,q,K;return d(),u("div",ut,[nt(ot,{open:k.value.open,title:k.value.title,message:k.value.message,requireText:k.value.requireText,delayMs:k.value.delayMs,onConfirm:e[0]||(e[0]=l=>k.value.onConfirm&&k.value.onConfirm()),onCancel:e[1]||(e[1]=l=>k.value.open=!1)},null,8,["open","title","message","requireText","delayMs"]),e[105]||(e[105]=Re('<div class="px-3 py-2 text-[11px] rounded border border-neutral-700 bg-neutral-800/40 text-neutral-300" data-v-9f1c7d7e><details data-v-9f1c7d7e><summary class="cursor-pointer" data-v-9f1c7d7e>도움말</summary><div class="mt-1 space-y-1" data-v-9f1c7d7e><div data-v-9f1c7d7e>• Startup: fast_startup으로 지연 루프를 기동합니다. 전체 테이블 생성은 idempotent합니다.</div><div data-v-9f1c7d7e>• Bootstrap: min AUC/max ECE 프리셋을 적용하고 폼은 로컬에 저장됩니다. 결과 JSON 다운로드 지원.</div><div data-v-9f1c7d7e>• Labeler/Risk: 라벨러 배치 파라미터(min_age/limit), Risk 자동 새로고침(15s)을 제공합니다.</div><div data-v-9f1c7d7e>• 안전 장치: 위험 작업은 확인 모달(지연 활성화/확인 단어)로 실수 방지합니다.</div><div data-v-9f1c7d7e>• 성능: 관리자 하위 화면은 지연 로딩되어 초기 로딩이 가볍습니다.</div><div data-v-9f1c7d7e>• Job Center: Backfill/Training/Labeler/Promotion을 카드로 모니터링합니다. 진행률/ETA/최근 이벤트를 확인하고 상세 탭으로 이동할 수 있습니다.</div><div data-v-9f1c7d7e>• 실시간: 대부분 패널은 Live(SSE)와 Auto(폴링)를 병행 지원합니다. Live가 켜지면 Auto는 자동 비활성화되어 중복 요청을 방지합니다.</div><a class="underline text-[11px] text-brand-accent" href="/docs/ko_ops_guide.md" target="_blank" rel="noopener" data-v-9f1c7d7e>자세한 가이드 보기</a></div></details></div>',1)),t("section",dt,[t("div",vt,[e[39]||(e[39]=t("h1",{class:"text-xl font-semibold"},"Admin Controls",-1)),t("div",pt,[v.value?(d(),u("span",ct,r(v.value),1)):S("",!0),b.value?(d(),u("span",mt,r(b.value),1)):S("",!0)])]),e[88]||(e[88]=t("p",{class:"text-xs text-neutral-400"},"운영/테스트 편의를 위한 관리 작업을 수동으로 실행할 수 있습니다.",-1)),t("div",ft,[t("div",bt,[e[48]||(e[48]=t("h2",{class:"text-sm font-semibold"},"Startup & Scheduling",-1)),t("div",xt,[t("button",{class:"btn",title:"초기 지연 루프 업그레이드/기동",disabled:c.value.fastUpgrade,onClick:tt},"fast_startup upgrade",8,gt),t("button",{class:"btn",title:"라벨러 1회 실행",disabled:c.value.labeler,onClick:et},"run labeler",8,yt),t("button",{class:"btn",title:"학습 트리거",disabled:c.value.training,onClick:we},"trigger training",8,_t),t("button",{class:"btn !bg-amber-700 hover:!bg-amber-600",title:"핵심 테이블 보장/생성",disabled:c.value.schema,onClick:Ye},"전체 테이블 생성",8,kt)]),t("div",wt,[t("label",St,[e[41]||(e[41]=t("span",{class:"text-neutral-400 w-28"},"training target",-1)),p(t("select",{class:"input w-full !py-1 !px-2","onUpdate:modelValue":e[2]||(e[2]=l=>L.value=l)},[...e[40]||(e[40]=[t("option",{value:"direction"},"direction",-1),t("option",{value:"bottom"},"bottom",-1)])],512),[[ae,L.value]])]),L.value==="bottom"?(d(),u("label",ht,[e[42]||(e[42]=t("span",{class:"text-neutral-400 w-28"},"bottom lookahead",-1)),p(t("input",{class:"input w-full",type:"number",min:"1","onUpdate:modelValue":e[3]||(e[3]=l=>N.value=l)},null,512),[[w,N.value,void 0,{number:!0}]])])):S("",!0),L.value==="bottom"?(d(),u("label",Ct,[e[43]||(e[43]=t("span",{class:"text-neutral-400 w-28"},"bottom drawdown",-1)),p(t("input",{class:"input w-full",type:"number",step:"0.001",min:"0","onUpdate:modelValue":e[4]||(e[4]=l=>D.value=l)},null,512),[[w,D.value,void 0,{number:!0}]])])):S("",!0),L.value==="bottom"?(d(),u("label",At,[e[44]||(e[44]=t("span",{class:"text-neutral-400 w-28"},"bottom rebound",-1)),p(t("input",{class:"input w-full",type:"number",step:"0.001",min:"0","onUpdate:modelValue":e[5]||(e[5]=l=>P.value=l)},null,512),[[w,P.value,void 0,{number:!0}]])])):S("",!0)]),t("div",Ut,[t("label",Et,[e[45]||(e[45]=t("span",{class:"text-neutral-400 w-28"},"labeler min_age",-1)),p(t("input",{class:"input w-full",type:"number",min:"0","onUpdate:modelValue":e[6]||(e[6]=l=>Q.value=l)},null,512),[[w,Q.value,void 0,{number:!0}]])]),t("label",Mt,[e[46]||(e[46]=t("span",{class:"text-neutral-400 w-28"},"labeler limit",-1)),p(t("input",{class:"input w-full",type:"number",min:"1","onUpdate:modelValue":e[7]||(e[7]=l=>Y.value=l)},null,512),[[w,Y.value,void 0,{number:!0}]])])]),t("div",Tt,[t("label",{class:"flex items-center gap-2",title:`Risk 패널 자동 새로고침 ${re(fe)}s`},[p(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=l=>B.value=l)},null,512),[[R,B.value]]),y(" "+r(`risk auto ${re(fe)}s`),1)],8,Rt),t("label",Vt,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=l=>z.value=l)},null,512),[[R,z.value]]),e[47]||(e[47]=y(" risk live (SSE)",-1))]),t("button",{class:"btn !py-0.5 !px-2",disabled:c.value.risk,onClick:Z},"Risk 즉시 Refresh",8,It)]),e[49]||(e[49]=t("div",{class:"text-[11px] text-neutral-500"},[y(" fast_startup: 초기 구동 시 heavy loop 지연된 상태라면 upgrade 호출 후 백그라운드 루프 시작. "),t("br"),y("전체 테이블 생성: `/api/admin/schema/ensure` 호출 (idempotent). 기존에 없던 모든 핵심 테이블을 생성. ")],-1)),G.value.length?(d(),u("div",Lt,[(d(!0),u(W,null,X(G.value,l=>(d(),u("span",{key:l,class:"px-1 py-0.5 bg-neutral-700/70 rounded"},r(l),1))),128))])):S("",!0)]),t("div",Ot,[e[72]||(e[72]=t("h2",{class:"text-sm font-semibold"},"Initial Model Bootstrap",-1)),t("div",Bt,[t("label",Nt,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=l=>n.value.backfill_year=l)},null,512),[[R,n.value.backfill_year]]),e[50]||(e[50]=y(" year backfill",-1))]),t("label",Dt,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=l=>n.value.fill_gaps=l)},null,512),[[R,n.value.fill_gaps]]),e[51]||(e[51]=y(" fill gaps",-1))]),t("label",Pt,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=l=>n.value.retry_fill_gaps=l)},null,512),[[R,n.value.retry_fill_gaps]]),e[52]||(e[52]=y(" retry gaps",-1))]),t("label",Ft,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=l=>n.value.dry_run=l)},null,512),[[R,n.value.dry_run]]),e[53]||(e[53]=y(" dry run",-1))]),t("label",jt,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=l=>n.value.train_sentiment=l)},null,512),[[R,n.value.train_sentiment]]),e[54]||(e[54]=y(" sentiment",-1))]),t("label",qt,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=l=>n.value.skip_promotion=l)},null,512),[[R,n.value.skip_promotion]]),e[55]||(e[55]=y(" skip promotion",-1))])]),t("div",$t,[t("div",null,[e[56]||(e[56]=t("div",{class:"text-neutral-400",title:"피처 스냅샷 목표 수"},"feature target",-1)),p(t("input",{class:"input w-full",type:"number",min:"100","onUpdate:modelValue":e[16]||(e[16]=l=>n.value.feature_target=l)},null,512),[[w,n.value.feature_target,void 0,{number:!0}]])]),t("div",null,[e[57]||(e[57]=t("div",{class:"text-neutral-400",title:"자동 계산 대신 강제 윈도우"},"feature window (override)",-1)),p(t("input",{class:"input w-full",type:"number",min:"1",placeholder:"auto","onUpdate:modelValue":e[17]||(e[17]=l=>n.value.feature_window=l)},null,512),[[w,n.value.feature_window,void 0,{number:!0}]])]),t("div",null,[e[58]||(e[58]=t("div",{class:"text-neutral-400",title:"최소 ROC AUC (구분력 하한)"},"min AUC",-1)),p(t("input",{class:"input w-full",type:"number",step:"0.01",min:"0",max:"1","onUpdate:modelValue":e[18]||(e[18]=l=>n.value.min_auc=l)},null,512),[[w,n.value.min_auc,void 0,{number:!0}]])]),t("div",null,[e[59]||(e[59]=t("div",{class:"text-neutral-400",title:"최대 허용 ECE (보정오차 상한)"},"max ECE",-1)),p(t("input",{class:"input w-full",type:"number",step:"0.01",min:"0",max:"1","onUpdate:modelValue":e[19]||(e[19]=l=>n.value.max_ece=l)},null,512),[[w,n.value.max_ece,void 0,{number:!0}]])])]),t("div",Jt,[e[60]||(e[60]=t("span",{class:"text-neutral-400"},"Presets:",-1)),t("button",{class:"btn btn-xs",title:"보수적: AUC≥0.70, ECE≤0.03",onClick:e[20]||(e[20]=l=>se("conservative"))},"conservative"),t("button",{class:"btn btn-xs",title:"표준: AUC≥0.65, ECE≤0.05",onClick:e[21]||(e[21]=l=>se("standard"))},"standard"),t("button",{class:"btn btn-xs",title:"완화: AUC≥0.60, ECE≤0.08",onClick:e[22]||(e[22]=l=>se("relaxed"))},"relaxed"),e[61]||(e[61]=t("span",{class:"text-[10px] text-neutral-500"},"권장: 표준(도메인/리스크 따라 조정)",-1))]),t("div",zt,[t("button",{class:"btn !bg-emerald-700 hover:!bg-emerald-600",disabled:c.value.bootstrap,onClick:e[23]||(e[23]=l=>ke(!1))},"Create initial model",8,Kt),t("button",{class:"btn !bg-neutral-700 hover:!bg-neutral-600",disabled:c.value.bootstrap,onClick:e[24]||(e[24]=l=>ke(!0))},"Dry run",8,Ht),t("button",{class:"btn !bg-indigo-700 hover:!bg-indigo-600",disabled:c.value.featBackfill,onClick:Ze},"Backfill features",8,Wt),h.value?(d(),u("button",{key:0,class:"btn !bg-slate-700 hover:!bg-slate-600",onClick:qe},"Download JSON")):S("",!0),h.value?(d(),u("button",{key:1,class:"btn !bg-slate-700 hover:!bg-slate-600",onClick:$e},"Copy JSON")):S("",!0),t("button",{class:"btn !bg-amber-800 hover:!bg-amber-700",disabled:c.value.bootstrap,onClick:Je},"Reset to defaults",8,Xt)]),t("div",Gt,[e[62]||(e[62]=y(" 진행 순서: ",-1)),t("span",Qt,r(n.value.backfill_year?"① 1년 OHLCV 백필":"① (백필 건너뜀)")+" > "+r(n.value.fill_gaps?n.value.retry_fill_gaps?"② 갭 채우기(리트라이 포함)":"② 갭 채우기":"② (갭 채우기 건너뜀)")+" > ③ 피처 스냅샷 백필(target: "+r(n.value.feature_target)+") > ④ 학습"+r(n.value.train_sentiment?"+감성":"")+r(n.value.dry_run?" (드라이런: 시뮬레이션)":"")+" > ⑤ "+r(n.value.skip_promotion?"프로모션 건너뜀":"임계치 검증 후 프로모션")+" "+r(n.value.min_auc!=null&&n.value.max_ece!=null?`(AUC≥${n.value.min_auc}, ECE≤${n.value.max_ece})`:"")+r(n.value.dry_run&&!n.value.skip_promotion?" (드라이런: 시뮬레이션)":"")+" > ⑥ 리포트 출력 ",1),e[63]||(e[63]=t("div",{class:"mt-0.5 text-[10px] text-neutral-500"}," 드라이런 안내: 학습/감성/프로모션 단계는 실행하지 않고 결과를 시뮬레이션합니다. OHLCV 백필·갭 채우기·피처 백필은 실제로 수행됩니다. ",-1))]),h.value?(d(),u("div",Yt,[t("div",Zt,[t("button",{class:A(["px-2 py-0.5 rounded",O.value==="summary"?"bg-neutral-800 text-neutral-200":"text-neutral-400 hover:text-neutral-200"]),onClick:e[25]||(e[25]=l=>O.value="summary")},"Summary",2),t("button",{class:A(["px-2 py-0.5 rounded",O.value==="meta"?"bg-neutral-800 text-neutral-200":"text-neutral-400 hover:text-neutral-200"]),onClick:e[26]||(e[26]=l=>O.value="meta")},"Meta",2),t("button",{class:A(["px-2 py-0.5 rounded",O.value==="raw"?"bg-neutral-800 text-neutral-200":"text-neutral-400 hover:text-neutral-200"]),onClick:e[27]||(e[27]=l=>O.value="raw")},"Raw",2),e[64]||(e[64]=t("span",{class:"ml-auto text-[10px] text-neutral-500"},"결과 요약/메타/원본을 분리 렌더합니다.",-1))]),O.value==="summary"?(d(),u("div",ea,[t("div",ta,[e[65]||(e[65]=t("div",{class:"text-neutral-400"},"AUC",-1)),t("div",{class:A(["font-mono",C.value.aucPass===!0?"text-emerald-400":C.value.aucPass===!1?"text-rose-400":"text-neutral-300"])},r(C.value.aucDisplay),3)]),t("div",aa,[e[66]||(e[66]=t("div",{class:"text-neutral-400"},"ECE",-1)),t("div",{class:A(["font-mono",C.value.ecePass===!0?"text-emerald-400":C.value.ecePass===!1?"text-rose-400":"text-neutral-300"])},r(C.value.eceDisplay),3)]),t("div",la,[e[67]||(e[67]=t("div",{class:"text-neutral-400"},"Samples",-1)),t("div",sa,r(C.value.samplesDisplay),1)]),t("div",na,[e[68]||(e[68]=t("div",{class:"text-neutral-400"},"Window",-1)),t("div",oa,r(C.value.windowDisplay),1)]),t("div",ra,[e[69]||(e[69]=t("div",{class:"text-neutral-400"},"Gate",-1)),t("div",null,[t("span",{class:A(["px-2 py-0.5 rounded text-[10px] font-mono",C.value.gate==="PASS"?"bg-emerald-700/30 text-emerald-300 border border-emerald-700/40":C.value.gate==="FAIL"?"bg-rose-700/30 text-rose-300 border border-rose-700/40":"bg-neutral-700/30 text-neutral-300 border border-neutral-700/40"])},r(C.value.gate),3),t("span",ia,"(AUC≥"+r(C.value.minAucDisplay)+", ECE≤"+r(C.value.maxEceDisplay)+")",1)])])])):O.value==="meta"?(d(),u("div",ua,[t("table",da,[e[71]||(e[71]=t("thead",null,[t("tr",{class:"text-neutral-500"},[t("th",{class:"text-left py-1 px-1"},"Key"),t("th",{class:"text-left py-1 px-1"},"Value")])],-1)),t("tbody",null,[(d(!0),u(W,null,X(be.value,l=>(d(),u("tr",{key:l.key,class:"border-t border-neutral-800/60"},[t("td",va,r(l.key),1),t("td",pa,r(l.value),1)]))),128)),be.value.length===0?(d(),u("tr",ca,[...e[70]||(e[70]=[t("td",{colspan:"2",class:"py-2 text-center text-neutral-600"},"No meta",-1)])])):S("",!0)])])])):(d(),u("div",ma,[t("pre",fa,r(Oe.value),1)]))])):S("",!0)]),t("div",ba,[t("h2",xa,[e[73]||(e[73]=y("Risk State ",-1)),t("button",{class:"btn !py-0.5 !px-2 text-[11px]",disabled:c.value.risk,onClick:Z},"Refresh",8,ga)]),M.value?(d(),u("div",ya,[t("div",_a,[e[74]||(e[74]=t("span",null,"Equity",-1)),t("span",null,r(M.value.session.current_equity),1)]),t("div",ka,[e[75]||(e[75]=t("span",null,"Peak",-1)),t("span",null,r(M.value.session.peak_equity),1)]),t("div",wa,[e[76]||(e[76]=t("span",null,"Start",-1)),t("span",null,r(M.value.session.starting_equity),1)]),t("div",Sa,[e[77]||(e[77]=t("span",null,"PnL",-1)),t("span",null,r(M.value.session.cumulative_pnl),1)]),t("div",ha,"Positions ("+r(M.value.positions.length)+")",1),t("table",Ca,[e[79]||(e[79]=t("thead",null,[t("tr",{class:"text-neutral-500"},[t("th",{class:"text-left"},"Sym"),t("th",{class:"text-right"},"Size"),t("th",{class:"text-right"},"Entry")])],-1)),t("tbody",null,[(d(!0),u(W,null,X(M.value.positions,l=>(d(),u("tr",{key:l.symbol,class:"border-t border-neutral-800/50"},[t("td",Aa,r(l.symbol),1),t("td",Ua,r(l.size),1),t("td",Ea,r(l.entry_price),1)]))),128)),M.value.positions.length===0?(d(),u("tr",Ma,[...e[78]||(e[78]=[t("td",{colspan:"3",class:"text-center text-neutral-600 py-1"},"None",-1)])])):S("",!0)])])])):(d(),u("div",Ta,"No data yet."))]),t("div",Ra,[t("h2",Va,[e[80]||(e[80]=y("Artifacts 상태 ",-1)),t("button",{class:"btn !py-0.5 !px-2 text-[11px]",disabled:c.value.artifacts,onClick:Pe},"Verify",8,Ia),t("button",{class:"btn !py-0.5 !px-2 text-[11px] !bg-indigo-700 hover:!bg-indigo-600",disabled:c.value.training,onClick:we},"Quick train",8,La)]),e[86]||(e[86]=t("div",{class:"text-[11px] text-neutral-400"}," 모델 레지스트리의 artifact 파일 존재 여부를 점검합니다. 파일이 없으면 빠른 학습으로 재생성할 수 있습니다. ",-1)),t("div",Oa,[t("div",Ba,[e[81]||(e[81]=t("span",{class:"text-neutral-400"},"ok",-1)),t("span",{class:A(["font-mono",(o=_.value.summary)!=null&&o.ok?"text-emerald-300":"text-neutral-300"])},r(((i=_.value.summary)==null?void 0:i.ok)??"-"),3)]),t("div",Na,[e[82]||(e[82]=t("span",{class:"text-neutral-400"},"missing",-1)),t("span",{class:A(["font-mono",(m=_.value.summary)!=null&&m.missing?"text-amber-300":"text-neutral-300"])},r(((g=_.value.summary)==null?void 0:g.missing)??"-"),3)]),t("div",Da,[e[83]||(e[83]=t("span",{class:"text-neutral-400"},"file_not_found",-1)),t("span",{class:A(["font-mono",(U=_.value.summary)!=null&&U.file_not_found?"text-rose-300":"text-neutral-300"])},r(((T=_.value.summary)==null?void 0:T.file_not_found)??"-"),3)]),t("div",Pa,[e[84]||(e[84]=t("span",{class:"text-neutral-400"},"file_check_error",-1)),t("span",{class:A(["font-mono",(q=_.value.summary)!=null&&q.file_check_error?"text-rose-300":"text-neutral-300"])},r(((K=_.value.summary)==null?void 0:K.file_check_error)??"-"),3)])]),t("div",Fa," 마지막 점검: "+r(_.value.lastChecked?new Date(_.value.lastChecked).toLocaleString():"-"),1),_.value.rows.length?(d(),u("details",ja,[e[85]||(e[85]=t("summary",{class:"cursor-pointer"},"최근 결과 일부",-1)),t("div",qa,[(d(!0),u(W,null,X(_.value.rows.slice(0,5),(l,H)=>(d(),u("div",{key:H,class:"truncate",title:l.artifact_path},[y(" • "+r(l.model_id??l.id)+" "+r(l.version?"("+l.version+")":"")+" → ",1),t("span",{class:A((l.status||l.check)==="ok"?"text-emerald-300":"text-rose-300")},r(l.status||l.check||"unknown"),3)],8,$a))),128))])])):S("",!0),e[87]||(e[87]=t("div",{class:"text-[10px] text-neutral-500"}," 팁: 백엔드는 MODEL_ARTIFACT_DIR가 영속 볼륨에 마운트되어야 합니다. ",-1))])])]),t("section",Ja,[t("div",za,[e[101]||(e[101]=t("h2",{class:"text-sm font-semibold"},"Feature Backfill Runs",-1)),t("div",Ka,[t("label",Ha,[e[89]||(e[89]=t("span",{class:"text-neutral-400"},"symbol",-1)),p(t("input",{class:"input !py-1 !px-2 w-24","onUpdate:modelValue":e[28]||(e[28]=l=>s.value.symbol=l),placeholder:"auto"},null,512),[[w,s.value.symbol]])]),t("label",Wa,[e[90]||(e[90]=t("span",{class:"text-neutral-400"},"interval",-1)),p(t("input",{class:"input !py-1 !px-2 w-24","onUpdate:modelValue":e[29]||(e[29]=l=>s.value.interval=l),placeholder:"auto"},null,512),[[w,s.value.interval]])]),t("label",Xa,[e[92]||(e[92]=t("span",{class:"text-neutral-400"},"status",-1)),p(t("select",{class:"input !py-1 !px-2","onUpdate:modelValue":e[30]||(e[30]=l=>s.value.status=l)},[...e[91]||(e[91]=[t("option",{value:""},"all",-1),t("option",{value:"running"},"running",-1),t("option",{value:"success"},"success",-1),t("option",{value:"error"},"error",-1)])],512),[[ae,s.value.status]])]),t("label",Ga,[e[93]||(e[93]=t("span",{class:"text-neutral-400"},"from",-1)),p(t("input",{class:"input !py-1 !px-2",type:"datetime-local","onUpdate:modelValue":e[31]||(e[31]=l=>s.value.startedFrom=l)},null,512),[[w,s.value.startedFrom]])]),t("label",Qa,[e[94]||(e[94]=t("span",{class:"text-neutral-400"},"to",-1)),p(t("input",{class:"input !py-1 !px-2",type:"datetime-local","onUpdate:modelValue":e[32]||(e[32]=l=>s.value.startedTo=l)},null,512),[[w,s.value.startedTo]])]),t("label",Ya,[e[95]||(e[95]=t("span",{class:"text-neutral-400"},"page",-1)),p(t("input",{class:"input !py-1 !px-2 w-16",type:"number",min:"1","onUpdate:modelValue":e[33]||(e[33]=l=>s.value.page=l)},null,512),[[w,s.value.page,void 0,{number:!0}]])]),t("label",Za,[e[96]||(e[96]=t("span",{class:"text-neutral-400"},"size",-1)),p(t("input",{class:"input !py-1 !px-2 w-16",type:"number",min:"1",max:"200","onUpdate:modelValue":e[34]||(e[34]=l=>s.value.pageSize=l)},null,512),[[w,s.value.pageSize,void 0,{number:!0}]])]),t("label",el,[e[98]||(e[98]=t("span",{class:"text-neutral-400"},"sort",-1)),p(t("select",{class:"input !py-1 !px-2","onUpdate:modelValue":e[35]||(e[35]=l=>s.value.sortBy=l)},[...e[97]||(e[97]=[Re('<option value="started_at" data-v-9f1c7d7e>started_at</option><option value="finished_at" data-v-9f1c7d7e>finished_at</option><option value="inserted" data-v-9f1c7d7e>inserted</option><option value="requested_target" data-v-9f1c7d7e>requested_target</option><option value="used_window" data-v-9f1c7d7e>used_window</option><option value="status" data-v-9f1c7d7e>status</option><option value="id" data-v-9f1c7d7e>id</option>',7)])],512),[[ae,s.value.sortBy]])]),t("label",tl,[p(t("select",{class:"input !py-1 !px-2","onUpdate:modelValue":e[36]||(e[36]=l=>s.value.order=l)},[...e[99]||(e[99]=[t("option",{value:"desc"},"desc",-1),t("option",{value:"asc"},"asc",-1)])],512),[[ae,s.value.order]])]),t("label",al,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[37]||(e[37]=l=>s.value.auto=l),class:"accent-brand-primary",disabled:s.value.live},null,8,ll),[[R,s.value.auto]]),y(" "+r(`auto ${re(Le)}s`),1)]),t("label",sl,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[38]||(e[38]=l=>s.value.live=l),class:"accent-brand-primary"},null,512),[[R,s.value.live]]),e[100]||(e[100]=y(" live (SSE)",-1))]),t("button",{class:"btn btn-xs",disabled:s.value.loading,onClick:j},"Refresh",8,nl)])]),t("div",ol,[t("table",rl,[e[103]||(e[103]=t("thead",null,[t("tr",{class:"text-neutral-500 border-b border-neutral-800"},[t("th",{class:"text-left py-1 px-1"},"ID"),t("th",{class:"text-left py-1 px-1"},"Status"),t("th",{class:"text-left py-1 px-1"},"Started"),t("th",{class:"text-left py-1 px-1"},"Finished"),t("th",{class:"text-right py-1 px-1"},"Req"),t("th",{class:"text-right py-1 px-1"},"Inserted"),t("th",{class:"text-right py-1 px-1"},"Window"),t("th",{class:"text-left py-1 px-1"},"Open range"),t("th",{class:"text-left py-1 px-1"},"Error"),t("th",{class:"text-left py-1 px-1"},"Actions")])],-1)),t("tbody",null,[(d(!0),u(W,null,X(s.value.items,l=>(d(),u("tr",{key:l.id,class:"border-b border-neutral-800/40 hover:bg-neutral-800/30"},[t("td",il,r(l.id),1),t("td",ul,[t("span",{class:A([He(l.status),"px-2 py-0.5 rounded"])},r(l.status),3)]),t("td",dl,r(xe(l.started_at)),1),t("td",vl,r(xe(l.finished_at)),1),t("td",pl,r(l.requested_target),1),t("td",cl,r(l.inserted),1),t("td",ml,r(l.used_window),1),t("td",fl,[t("div",null,r(l.from_open_time)+" → "+r(l.to_open_time),1)]),t("td",{class:"py-1 px-1 text-[10px] max-w-[280px] truncate",title:l.error||""},r(l.error||""),9,bl),t("td",xl,[t("button",{class:"btn btn-xs",onClick:H=>We(l)},"Detail",8,gl)])]))),128)),s.value.items.length===0?(d(),u("tr",yl,[...e[102]||(e[102]=[t("td",{colspan:"10",class:"text-center text-neutral-600 py-2"},"No runs",-1)])])):S("",!0)])])]),t("div",_l,[t("div",kl,"Total: "+r(s.value.total)+" • Page "+r(s.value.page)+" / "+r(ne.value),1),t("div",wl,[t("button",{class:"btn btn-xs",disabled:s.value.page<=1||s.value.loading,onClick:Ge},"Prev",8,Sl),t("button",{class:"btn btn-xs",disabled:s.value.page>=ne.value||s.value.loading,onClick:Qe},"Next",8,hl)])]),s.value.detail?(d(),u("details",Cl,[t("summary",Al,"Run #"+r(s.value.detail.id)+" detail",1),t("pre",Ul,r(s.value.detail),1)])):S("",!0)]),t("section",El,[e[104]||(e[104]=t("h2",{class:"text-sm font-semibold"},"Raw Logs / Debug",-1)),t("textarea",{readonly:"",class:"w-full h-40 bg-neutral-900 border border-neutral-700 rounded p-2 text-[11px] font-mono",value:J.value.join(`
`)},null,8,Ml),t("div",{class:"flex gap-2 text-xs"},[t("button",{class:"btn !py-1 !px-2",onClick:Be},"Clear")])])])}}}),Nl=rt(Tl,[["__scopeId","data-v-9f1c7d7e"]]);export{Nl as default};
