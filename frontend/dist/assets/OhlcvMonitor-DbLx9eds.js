import{d as V,c as S,m as j,a,b as t,t as r,A as n,p as f,v as g,n as d,f as O,i as R,F as _,r as v,e as i}from"./index-BtrOmqR2.js";import{u as T}from"./ohlcv-BSjv8p1h.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./http-CilSfrpq.js";const B={class:"space-y-4"},D={class:"flex flex-wrap gap-4 items-end"},N={class:"flex flex-col gap-1"},L={class:"px-2 py-1 text-xs rounded bg-neutral-800 border border-neutral-700 font-mono tracking-wide select-none"},P={class:"flex flex-col gap-1"},U={class:"flex flex-col gap-1"},$={class:"flex flex-col gap-1"},H=["disabled"],I={class:"grid md:grid-cols-3 gap-4"},W={class:"md:col-span-2 space-y-4"},z={class:"p-3 rounded border border-neutral-800 bg-neutral-900/60"},E={class:"flex items-center justify-between mb-2"},K={key:0,class:"text-[10px] text-neutral-500"},X={class:"text-neutral-300"},q={key:0,class:"text-[11px] text-neutral-500"},G=["viewBox"],J=["x1","x2","y1","y2"],Q=["x","y","height"],Y={class:"p-3 rounded border border-neutral-800 bg-neutral-900/60 overflow-auto"},Z={class:"w-full text-[10px] border-collapse"},tt={class:"text-right"},et={class:"text-right"},st={class:"text-right"},lt={class:"space-y-4"},nt={class:"p-3 rounded border border-neutral-800 bg-neutral-900/60"},ot={class:"text-[11px] space-y-1"},rt={class:"flex justify-between"},at={class:"flex justify-between"},it={class:"flex justify-between"},dt={class:"flex justify-between"},ut={class:"flex justify-between"},y=800,c=180,w=6,xt=V({__name:"OhlcvMonitor",setup(ct){const s=T();function C(){s.fetchRecent()}function k(o){return new Date(o).toLocaleTimeString()}function x(o){return o.toFixed(4)}function h(o){if(o===0)return"0";const e=Math.abs(o);return e>=1e6?(o/1e6).toFixed(2)+"M":e>=1e3?(o/1e3).toFixed(2)+"K":o.toFixed(2)}function b(o){return o.close>=o.open?"text-emerald-400":"text-rose-400"}const M=S(()=>s.metrics.pct_change!=null?(s.metrics.pct_change*100).toFixed(2)+"%":"-");function F(o){return o==null?"text-neutral-400":o>0?"text-emerald-400":o<0?"text-rose-400":"text-neutral-300"}function m(o){const e=s.candles.length||1;return(o+.5)*(y/e)}function u(o){if(!s.range)return c/2;const e=s.range,l=e.high-e.low||1;return c-(o-e.low)/l*c}return j(()=>{s.initDefaults("XRPUSDT","1m"),s.fetchRecent(),s.startPolling()}),(o,e)=>(i(),a("div",B,[t("div",D,[t("div",N,[e[4]||(e[4]=t("label",{class:"text-[10px] text-neutral-400"},"Symbol",-1)),t("div",L,r(n(s).symbol),1)]),t("div",P,[e[5]||(e[5]=t("label",{class:"text-[10px] text-neutral-400"},"Interval",-1)),f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>n(s).interval=l),class:"inp",placeholder:"e.g. 1m"},null,512),[[g,n(s).interval]])]),t("div",U,[e[6]||(e[6]=t("label",{class:"text-[10px] text-neutral-400"},"Limit",-1)),f(t("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=l=>n(s).limit=l),class:"inp w-24",min:"10",max:"500"},null,512),[[g,n(s).limit,void 0,{number:!0}]])]),t("div",$,[e[7]||(e[7]=t("label",{class:"text-[10px] text-neutral-400"},"Poll (s)",-1)),f(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=l=>n(s).pollSec=l),class:"inp w-20",min:"5",max:"120"},null,512),[[g,n(s).pollSec,void 0,{number:!0}]])]),t("button",{class:"btn-xs h-8 self-start",onClick:C,disabled:n(s).loading},"Refresh",8,H),t("button",{class:d(["btn-xs h-8 self-start",n(s).auto?"bg-neutral-700":"bg-neutral-800"]),onClick:e[3]||(e[3]=l=>n(s).toggleAuto())},"Auto: "+r(n(s).auto?"On":"Off"),3)]),t("div",I,[t("div",W,[t("div",z,[t("div",E,[e[9]||(e[9]=t("h2",{class:"text-xs font-semibold text-neutral-300"},"Mini Chart",-1)),n(s).range?(i(),a("div",K,[e[8]||(e[8]=R("Range: ",-1)),t("span",X,r(n(s).range.low.toFixed(4))+" - "+r(n(s).range.high.toFixed(4)),1)])):O("",!0)]),n(s).candles.length?(i(),a("svg",{key:1,viewBox:`0 0 ${y} ${c}`,class:"w-full h-48"},[(i(!0),a(_,null,v(n(s).candles,(l,p)=>(i(),a("g",{key:l.open_time},[t("line",{x1:m(p),x2:m(p),y1:u(l.high),y2:u(l.low),stroke:"currentColor","stroke-width":"1",class:d(l.close>=l.open?"text-emerald-400":"text-rose-400")},null,10,J),t("rect",{x:m(p)-w/2,y:u(Math.max(l.open,l.close)),width:w,height:Math.max(1,Math.abs(u(l.open)-u(l.close))),class:d(l.close>=l.open?"fill-emerald-500/50":"fill-rose-500/50")},null,10,Q)]))),128))],8,G)):(i(),a("div",q,"No data"))]),t("div",Y,[e[11]||(e[11]=t("h2",{class:"text-xs font-semibold text-neutral-300 mb-2"},"Recent Candles (latest last)",-1)),t("table",Z,[e[10]||(e[10]=t("thead",{class:"text-neutral-400"},[t("tr",null,[t("th",{class:"text-left font-normal pb-1"},"Time"),t("th",{class:"text-right font-normal pb-1"},"Open"),t("th",{class:"text-right font-normal pb-1"},"High"),t("th",{class:"text-right font-normal pb-1"},"Low"),t("th",{class:"text-right font-normal pb-1"},"Close"),t("th",{class:"text-right font-normal pb-1"},"Vol")])],-1)),t("tbody",null,[(i(!0),a(_,null,v(n(s).candles,l=>(i(),a("tr",{key:l.open_time,class:"hover:bg-neutral-800/40"},[t("td",null,r(k(l.open_time)),1),t("td",{class:d(["text-right",b(l)])},r(x(l.open)),3),t("td",tt,r(x(l.high)),1),t("td",et,r(x(l.low)),1),t("td",{class:d(["text-right",b(l)])},r(x(l.close)),3),t("td",st,r(l.volume!=null?h(l.volume):"-"),1)]))),128))])])])]),t("div",lt,[t("div",nt,[e[17]||(e[17]=t("h2",{class:"text-xs font-semibold text-neutral-300 mb-2"},"Metrics",-1)),t("dl",ot,[t("div",rt,[e[12]||(e[12]=t("dt",{class:"text-neutral-500"},"Pct Change",-1)),t("dd",{class:d(F(n(s).metrics.pct_change))},r(M.value),3)]),t("div",at,[e[13]||(e[13]=t("dt",{class:"text-neutral-500"},"Avg Volume",-1)),t("dd",null,r(n(s).metrics.avg_volume!=null?h(n(s).metrics.avg_volume):"-"),1)]),t("div",it,[e[14]||(e[14]=t("dt",{class:"text-neutral-500"},"Volatility",-1)),t("dd",null,r(n(s).metrics.volatility!=null?n(s).metrics.volatility.toFixed(4):"-"),1)]),t("div",dt,[e[15]||(e[15]=t("dt",{class:"text-neutral-500"},"Candles",-1)),t("dd",null,r(n(s).candles.length),1)]),t("div",ut,[e[16]||(e[16]=t("dt",{class:"text-neutral-500"},"Auto",-1)),t("dd",null,r(n(s).auto?"yes":"no"),1)])])])])])]))}}),ht=A(xt,[["__scopeId","data-v-0b643c15"]]);export{ht as default};
