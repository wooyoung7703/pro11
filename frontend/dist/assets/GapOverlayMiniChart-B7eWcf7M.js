import{u as y}from"./ohlcv-BSjv8p1h.js";import{d as k,c as l,a,e as s,b as f,f as x,F as C,r as b,t as G}from"./index-BtrOmqR2.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./http-CilSfrpq.js";const O={key:0,class:"gap-mini-chart"},S=["width","height"],B=["width","height"],N={key:0},j=["x","width","height","fill","stroke"],F=["points"],V=["y"],$={key:1,class:"empty"},z=k({__name:"GapOverlayMiniChart",props:{width:{default:240},height:{default:60}},setup(i){const h=i,r=y(),e=l(()=>r.candles),g=l(()=>r.gapSegments),m=l(()=>r.openGapCount),c=l(()=>{if(!e.value.length)return null;let o=e.value[0].low,n=e.value[0].high;for(const t of e.value)t.low<o&&(o=t.low),t.high>n&&(n=t.high);return{lo:o,hi:n}});function u(o){if(!e.value.length)return 0;const n=e.value[0].open_time,t=e.value[e.value.length-1].open_time;return t===n?0:(o-n)/(t-n)*h.width}const p=l(()=>{if(!e.value.length||!c.value)return"";const{lo:o,hi:n}=c.value,t=n-o||1;return e.value.map((d,v)=>{const _=v/Math.max(1,e.value.length-1)*h.width,w=h.height-(d.close-o)/t*h.height;return`${_},${w}`}).join(" ")});return(o,n)=>e.value.length?(s(),a("div",O,[(s(),a("svg",{width:i.width,height:i.height},[f("rect",{width:i.width,height:i.height,fill:"#0f1115",rx:"4",ry:"4"},null,8,B),c.value?(s(),a("g",N,[(s(!0),a(C,null,b(g.value,(t,d)=>(s(),a("rect",{key:d,class:"gap-segment",x:u(t.from_ts),y:2,width:Math.max(1,u(t.to_ts)-u(t.from_ts)),height:i.height-4,fill:t.state==="open"?"rgba(255,99,71,0.35)":"rgba(255,215,0,0.20)",stroke:t.state==="open"?"tomato":"gold","stroke-width":"1"},null,8,j))),128)),f("polyline",{class:"price-line",points:p.value,fill:"none",stroke:"#4ea1ff","stroke-width":"1.2","stroke-linejoin":"round","stroke-linecap":"round",opacity:"0.9"},null,8,F)])):x("",!0),f("text",{x:"6",y:i.height-6,"font-size":"10",fill:"#ccc"},"Open: "+G(m.value),9,V)],8,S))])):(s(),a("div",$,"No data"))}}),P=M(z,[["__scopeId","data-v-fba2205f"]]);export{P as default};
