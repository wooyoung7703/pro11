const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminPanel-CzWua-Dp.js","assets/index-BtrOmqR2.js","assets/index-BUiix5qQ.css","assets/confirmPresets-CzcHK0BG.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/confirmPresets-DnvEsZXg.css","assets/http-CilSfrpq.js","assets/sse-Bs9vxAPf.js","assets/AdminPanel-B1yNCm4D.css","assets/RiskMetrics-i4bu8UEK.js","assets/RiskMetrics-hVXGTG7s.css","assets/InferencePlayground-C0GNnh7d.js","assets/inference-Cw5xx8qd.js","assets/ohlcv-BSjv8p1h.js","assets/InferencePlayground-B0NhgkCI.css","assets/Calibration-CGRsnFMb.js","assets/Calibration-CI9396Zx.css","assets/TrainingJobs-BG4uQm0b.js","assets/trainingJobs-Csi7WAeR.js","assets/TrainingJobs-DBzYHDZ4.css","assets/ModelMetrics-D-yYFNIL.js","assets/FeatureDrift-CwjAWlUE.js","assets/NewsView-CTWYmRTa.js","assets/NewsView-B-syyUXC.css","assets/JobCenter-ziJmwDzw.js","assets/JobCenter-pWpSmOvk.css","assets/IngestionStatus-CrAR4I5C.js","assets/ingestion-LZaYOlHt.js","assets/PromotionAudit-BN5iLNz2.js","assets/PromotionAudit-CdgLuaIN.css","assets/ModelsSummary-BM6VJYJf.js","assets/ModelsSummary-DimbollG.css","assets/PromotionAlertSettings-BkKfhbo7.js"])))=>i.map(i=>d[i]);
import{d as j,k as m,c as A,J as a,m as H,H as U,o as X,l as Y,a as u,b as i,F as z,r as G,n as Q,f as b,t as x,A as W,h as w,K as Z,L as ee,I as te,e as r,_ as n}from"./index-BtrOmqR2.js";import oe from"./http-CilSfrpq.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={class:"space-y-4"},ne={class:"card p-0 overflow-hidden"},ie={class:"border-b border-neutral-800 bg-neutral-900/60 flex flex-wrap"},le=["onClick"],re={key:0,class:"ml-1 inline-block w-2 h-2 rounded-full bg-amber-400 animate-pulse",title:"Promotion alerts cooldown active"},ce=["title"],_e={class:"ml-auto px-3 py-2 text-[10px] text-neutral-500 flex items-center gap-2"},ue={class:"font-mono text-neutral-400",title:"Last change"},me={class:"p-4"},de=j({__name:"AdminConsole",setup(pe){const f=a(()=>n(()=>import("./AdminPanel-CzWua-Dp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),P=a(()=>n(()=>import("./RiskMetrics-i4bu8UEK.js"),__vite__mapDeps([9,1,2,6,7,4,10]))),L=a(()=>n(()=>import("./InferencePlayground-C0GNnh7d.js"),__vite__mapDeps([11,1,2,12,6,13,4,14]))),D=a(()=>n(()=>import("./Calibration-CGRsnFMb.js"),__vite__mapDeps([15,1,2,6,13,12,4,16]))),T=a(()=>n(()=>import("./TrainingJobs-BG4uQm0b.js"),__vite__mapDeps([17,1,2,18,6,4,19]))),S=a(()=>n(()=>import("./ModelMetrics-D-yYFNIL.js"),__vite__mapDeps([20,1,2,6]))),R=a(()=>n(()=>import("./FeatureDrift-CwjAWlUE.js"),__vite__mapDeps([21,1,2,6]))),C=a(()=>n(()=>import("./NewsView-CTWYmRTa.js"),__vite__mapDeps([22,1,2,6,4,23]))),O=a(()=>n(()=>import("./JobCenter-ziJmwDzw.js"),__vite__mapDeps([24,1,2,7,6,18,3,4,5,25]))),V=a(()=>n(()=>import("./IngestionStatus-CrAR4I5C.js"),__vite__mapDeps([26,1,2,27,6]))),M=a(()=>n(()=>import("./PromotionAudit-BN5iLNz2.js"),__vite__mapDeps([28,1,2,4,29]))),N=a(()=>n(()=>import("./ModelsSummary-BM6VJYJf.js"),__vite__mapDeps([30,1,2,3,4,5,31]))),$=a(()=>n(()=>import("./PromotionAlertSettings-BkKfhbo7.js"),__vite__mapDeps([32,1,2]))),_=[{key:"actions",label:"Actions",comp:f},{key:"jobs",label:"Job Center",comp:O},{key:"risk",label:"Risk",comp:P},{key:"inference",label:"Inference",comp:L},{key:"calibration",label:"Calibration",comp:D},{key:"training",label:"Training",comp:T},{key:"metrics",label:"Metrics",comp:S},{key:"models",label:"Models",comp:N},{key:"drift",label:"Drift",comp:R},{key:"news",label:"News",comp:C},{key:"ingestion",label:"Ingestion",comp:V},{key:"promotion_audit",label:"Promotion",comp:M},{key:"promotion_alerts",label:"Promotion Alerts",comp:$}],y=U(),F=te(),c=m("actions"),v=m(!1);let d=null;function k(e){_.find(s=>s.key===e)&&(c.value=e)}const K=A(()=>{var e;return((e=_.find(s=>s.key===c.value))==null?void 0:e.comp)||f}),g=m(null),p=m({active:!1,duration_seconds:0}),B=A(()=>{const e=p.value;if(e.active){const s=Math.floor(e.duration_seconds||0),t=e.last_exit_ts?new Date(e.last_exit_ts*1e3).toLocaleString():"N/A",l=e.started_at?new Date(e.started_at*1e3).toLocaleString():"N/A";return`Seed fallback active ${s}s
Started: ${l}
Last exit: ${t}`}if(!e.active&&e.last_exit_ts){const s=e.healthy_uptime_seconds?Math.floor(e.healthy_uptime_seconds):null,t=new Date(e.last_exit_ts*1e3).toLocaleString();return s!==null?`Healthy since last fallback: ${s}s
Last exit: ${t}`:`Last fallback exit: ${t}`}return""});async function h(){try{const e=await fetch("/api/models/promotion/alert/status",{headers:{"X-API-Key":window.API_KEY||"dev-key"}});e.ok&&(g.value=await e.json())}catch{}}async function E(){try{const e=await fetch("/api/inference/seed/status",{headers:{"X-API-Key":window.API_KEY||"dev-key"}});e.ok&&(p.value=await e.json())}catch{}}const q=new Date().toLocaleTimeString();return H(()=>{const e=y.query.tab;if(typeof e=="string"&&_.some(t=>t.key===e))c.value=e;else{const t=localStorage.getItem("admin_active_tab");t&&_.some(l=>l.key===t)&&(c.value=t)}h(),E(),setInterval(h,3e4),setInterval(E,15e3);const s=async()=>{var t;try{const o=(await oe.get("/api/ingestion/status")).data||{},J=((t=o==null?void 0:o.thresholds)==null?void 0:t.ingestion_lag_sec)||60,I=typeof(o==null?void 0:o.lag_sec)=="number"?o.lag_sec:typeof(o==null?void 0:o.lag_seconds)=="number"?o.lag_seconds:typeof(o==null?void 0:o.last_message_ts)=="number"?Date.now()/1e3-o.last_message_ts:null;v.value=(o==null?void 0:o.stale)===!0||typeof I=="number"&&I>J}catch{}};s(),d=setInterval(s,1e4)}),X(()=>{d&&clearInterval(d)}),Y(c,e=>{localStorage.setItem("admin_active_tab",e),F.replace({query:{...y.query,tab:e}})}),(e,s)=>(r(),u("div",ae,[i("section",ne,[i("div",ie,[(r(),u(z,null,G(_,t=>{var l;return i("button",{key:t.key,class:Q(["px-4 py-2 text-xs font-medium tracking-wide border-r border-neutral-800 hover:bg-neutral-800/60 transition",c.value===t.key?"bg-neutral-800 text-brand-accent":"text-neutral-400"]),onClick:o=>k(t.key)},[i("span",null,x(t.label),1),t.key==="promotion_alerts"&&((l=g.value)!=null&&l.in_cooldown)?(r(),u("span",re)):b("",!0),t.key==="inference"&&p.value.active?(r(),u("span",{key:1,class:"ml-1 inline-block w-2 h-2 rounded-full bg-rose-500 animate-pulse",title:B.value},null,8,ce)):b("",!0)],10,le)}),64)),i("div",_e,[v.value?(r(),u("button",{key:0,class:"px-2 py-0.5 rounded bg-amber-600/20 text-amber-300 hover:bg-amber-600/30 transition",title:"Ingestion stale (click to open)",onClick:s[0]||(s[0]=t=>k("ingestion"))},"INGESTION STALE")):b("",!0),s[1]||(s[1]=i("span",{class:"hidden md:inline"},"ADMIN CONSOLE",-1)),i("span",ue,x(W(q)),1)])]),i("div",me,[(r(),w(ee,null,[(r(),w(Z(K.value)))],1024))])])]))}}),ve=se(de,[["__scopeId","data-v-1c6b11c9"]]);export{ve as default};
